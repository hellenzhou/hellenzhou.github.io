<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="Redis配置文件样例Note on units: when memory size is needed, it is possible to specifiyit in the usual form of 1k 5GB 4M and so forth:# 1k =&amp;gt; 1000 bytes1kb =&amp;gt; 1024 bytes1m =&amp;gt; 1000000 bytes1mb =&amp;gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="hellen的博客">
<meta property="og:url" content="https://hellenzhou.github.io/2017/07/25/redis配置文件redis-conf的详细说明文档/index.html">
<meta property="og:site_name" content="hellen的博客">
<meta property="og:description" content="Redis配置文件样例Note on units: when memory size is needed, it is possible to specifiyit in the usual form of 1k 5GB 4M and so forth:# 1k =&amp;gt; 1000 bytes1kb =&amp;gt; 1024 bytes1m =&amp;gt; 1000000 bytes1mb =&amp;gt;">
<meta property="og:updated_time" content="2017-07-25T10:02:03.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hellen的博客">
<meta name="twitter:description" content="Redis配置文件样例Note on units: when memory size is needed, it is possible to specifiyit in the usual form of 1k 5GB 4M and so forth:# 1k =&amp;gt; 1000 bytes1kb =&amp;gt; 1024 bytes1m =&amp;gt; 1000000 bytes1mb =&amp;gt;">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://hellenzhou.github.io/2017/07/25/redis配置文件redis-conf的详细说明文档/"/>





  <title> | hellen的博客</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">hellen的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://hellenzhou.github.io/2017/07/25/redis配置文件redis-conf的详细说明文档/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hellen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hellen的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline"></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-25T17:45:40+08:00">
                2017-07-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Redis配置文件样例"><a href="#Redis配置文件样例" class="headerlink" title="Redis配置文件样例"></a>Redis配置文件样例</h1><h1 id="Note-on-units-when-memory-size-is-needed-it-is-possible-to-specifiy"><a href="#Note-on-units-when-memory-size-is-needed-it-is-possible-to-specifiy" class="headerlink" title="Note on units: when memory size is needed, it is possible to specifiy"></a>Note on units: when memory size is needed, it is possible to specifiy</h1><h1 id="it-in-the-usual-form-of-1k-5GB-4M-and-so-forth"><a href="#it-in-the-usual-form-of-1k-5GB-4M-and-so-forth" class="headerlink" title="it in the usual form of 1k 5GB 4M and so forth:"></a>it in the usual form of 1k 5GB 4M and so forth:</h1><p>#</p>
<h1 id="1k-gt-1000-bytes"><a href="#1k-gt-1000-bytes" class="headerlink" title="1k =&gt; 1000 bytes"></a>1k =&gt; 1000 bytes</h1><h1 id="1kb-gt-1024-bytes"><a href="#1kb-gt-1024-bytes" class="headerlink" title="1kb =&gt; 1024 bytes"></a>1kb =&gt; 1024 bytes</h1><h1 id="1m-gt-1000000-bytes"><a href="#1m-gt-1000000-bytes" class="headerlink" title="1m =&gt; 1000000 bytes"></a>1m =&gt; 1000000 bytes</h1><h1 id="1mb-gt-1024-1024-bytes"><a href="#1mb-gt-1024-1024-bytes" class="headerlink" title="1mb =&gt; 1024*1024 bytes"></a>1mb =&gt; 1024*1024 bytes</h1><h1 id="1g-gt-1000000000-bytes"><a href="#1g-gt-1000000000-bytes" class="headerlink" title="1g =&gt; 1000000000 bytes"></a>1g =&gt; 1000000000 bytes</h1><h1 id="1gb-gt-102410241024-bytes"><a href="#1gb-gt-102410241024-bytes" class="headerlink" title="1gb =&gt; 102410241024 bytes"></a>1gb =&gt; 1024<em>1024</em>1024 bytes</h1><p>#</p>
<h1 id="units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same"><a href="#units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same" class="headerlink" title="units are case insensitive so 1GB 1Gb 1gB are all the same."></a>units are case insensitive so 1GB 1Gb 1gB are all the same.</h1><h1 id="Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程"><a href="#Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程" class="headerlink" title="Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程"></a>Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程</h1><h1 id="启用守护进程后，Redis会把pid写到一个pidfile中，在-var-run-redis-pid"><a href="#启用守护进程后，Redis会把pid写到一个pidfile中，在-var-run-redis-pid" class="headerlink" title="启用守护进程后，Redis会把pid写到一个pidfile中，在/var/run/redis.pid"></a>启用守护进程后，Redis会把pid写到一个pidfile中，在/var/run/redis.pid</h1><p>daemonize no</p>
<h1 id="当Redis以守护进程方式运行时，Redis默认会把pid写入-var-run-redis-pid文件，可以通过pidfile指定"><a href="#当Redis以守护进程方式运行时，Redis默认会把pid写入-var-run-redis-pid文件，可以通过pidfile指定" class="headerlink" title="当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定"></a>当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定</h1><p>pidfile /var/run/redis.pid</p>
<h1 id="指定Redis监听端口，默认端口为6379"><a href="#指定Redis监听端口，默认端口为6379" class="headerlink" title="指定Redis监听端口，默认端口为6379"></a>指定Redis监听端口，默认端口为6379</h1><h1 id="如果指定0端口，表示Redis不监听TCP连接"><a href="#如果指定0端口，表示Redis不监听TCP连接" class="headerlink" title="如果指定0端口，表示Redis不监听TCP连接"></a>如果指定0端口，表示Redis不监听TCP连接</h1><p>port 6379</p>
<h1 id="绑定的主机地址"><a href="#绑定的主机地址" class="headerlink" title="绑定的主机地址"></a>绑定的主机地址</h1><h1 id="你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接"><a href="#你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接" class="headerlink" title="你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接"></a>你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接</h1><h1 id="bind-127-0-0-1"><a href="#bind-127-0-0-1" class="headerlink" title="bind 127.0.0.1"></a>bind 127.0.0.1</h1><h1 id="Specify-the-path-for-the-unix-socket-that-will-be-used-to-listen-for"><a href="#Specify-the-path-for-the-unix-socket-that-will-be-used-to-listen-for" class="headerlink" title="Specify the path for the unix socket that will be used to listen for"></a>Specify the path for the unix socket that will be used to listen for</h1><h1 id="incoming-connections-There-is-no-default-so-Redis-will-not-listen"><a href="#incoming-connections-There-is-no-default-so-Redis-will-not-listen" class="headerlink" title="incoming connections. There is no default, so Redis will not listen"></a>incoming connections. There is no default, so Redis will not listen</h1><h1 id="on-a-unix-socket-when-not-specified"><a href="#on-a-unix-socket-when-not-specified" class="headerlink" title="on a unix socket when not specified."></a>on a unix socket when not specified.</h1><p>#</p>
<h1 id="unixsocket-tmp-redis-sock"><a href="#unixsocket-tmp-redis-sock" class="headerlink" title="unixsocket /tmp/redis.sock"></a>unixsocket /tmp/redis.sock</h1><h1 id="unixsocketperm-755"><a href="#unixsocketperm-755" class="headerlink" title="unixsocketperm 755"></a>unixsocketperm 755</h1><h1 id="当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能"><a href="#当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能" class="headerlink" title="当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能"></a>当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能</h1><p>timeout 0</p>
<h1 id="指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose"><a href="#指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose" class="headerlink" title="指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose"></a>指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose</h1><h1 id="debug-很多信息-对开发／测试比较有用"><a href="#debug-很多信息-对开发／测试比较有用" class="headerlink" title="debug (很多信息, 对开发／测试比较有用)"></a>debug (很多信息, 对开发／测试比较有用)</h1><h1 id="verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level"><a href="#verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level" class="headerlink" title="verbose (many rarely useful info, but not a mess like the debug level)"></a>verbose (many rarely useful info, but not a mess like the debug level)</h1><h1 id="notice-moderately-verbose-what-you-want-in-production-probably"><a href="#notice-moderately-verbose-what-you-want-in-production-probably" class="headerlink" title="notice (moderately verbose, what you want in production probably)"></a>notice (moderately verbose, what you want in production probably)</h1><h1 id="warning-only-very-important-critical-messages-are-logged"><a href="#warning-only-very-important-critical-messages-are-logged" class="headerlink" title="warning (only very important / critical messages are logged)"></a>warning (only very important / critical messages are logged)</h1><p>loglevel verbose</p>
<h1 id="日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给-dev-null"><a href="#日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给-dev-null" class="headerlink" title="日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给/dev/null"></a>日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给/dev/null</h1><p>logfile stdout</p>
<h1 id="To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes"><a href="#To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes" class="headerlink" title="To enable logging to the system logger, just set ‘syslog-enabled’ to yes,"></a>To enable logging to the system logger, just set ‘syslog-enabled’ to yes,</h1><h1 id="and-optionally-update-the-other-syslog-parameters-to-suit-your-needs"><a href="#and-optionally-update-the-other-syslog-parameters-to-suit-your-needs" class="headerlink" title="and optionally update the other syslog parameters to suit your needs."></a>and optionally update the other syslog parameters to suit your needs.</h1><h1 id="syslog-enabled-no"><a href="#syslog-enabled-no" class="headerlink" title="syslog-enabled no"></a>syslog-enabled no</h1><h1 id="Specify-the-syslog-identity"><a href="#Specify-the-syslog-identity" class="headerlink" title="Specify the syslog identity."></a>Specify the syslog identity.</h1><h1 id="syslog-ident-redis"><a href="#syslog-ident-redis" class="headerlink" title="syslog-ident redis"></a>syslog-ident redis</h1><h1 id="Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7"><a href="#Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7" class="headerlink" title="Specify the syslog facility.  Must be USER or between LOCAL0-LOCAL7."></a>Specify the syslog facility.  Must be USER or between LOCAL0-LOCAL7.</h1><h1 id="syslog-facility-local0"><a href="#syslog-facility-local0" class="headerlink" title="syslog-facility local0"></a>syslog-facility local0</h1><h1 id="设置数据库的数量，默认数据库为0，可以使用select-命令在连接上指定数据库id"><a href="#设置数据库的数量，默认数据库为0，可以使用select-命令在连接上指定数据库id" class="headerlink" title="设置数据库的数量，默认数据库为0，可以使用select 命令在连接上指定数据库id"></a>设置数据库的数量，默认数据库为0，可以使用select <dbid>命令在连接上指定数据库id</dbid></h1><h1 id="dbid是从0到‘databases’-1的数目"><a href="#dbid是从0到‘databases’-1的数目" class="headerlink" title="dbid是从0到‘databases’-1的数目"></a>dbid是从0到‘databases’-1的数目</h1><p>databases 16</p>
<p>################################ SNAPSHOTTING  #################################</p>
<h1 id="指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合"><a href="#指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合" class="headerlink" title="指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合"></a>指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合</h1><h1 id="Save-the-DB-on-disk"><a href="#Save-the-DB-on-disk" class="headerlink" title="Save the DB on disk:"></a>Save the DB on disk:</h1><p>#</p>
<h1 id="save"><a href="#save" class="headerlink" title="save  "></a>save <seconds> <changes></changes></seconds></h1><p>#</p>
<h1 id="Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given"><a href="#Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given" class="headerlink" title="Will save the DB if both the given number of seconds and the given"></a>Will save the DB if both the given number of seconds and the given</h1><h1 id="number-of-write-operations-against-the-DB-occurred"><a href="#number-of-write-operations-against-the-DB-occurred" class="headerlink" title="number of write operations against the DB occurred."></a>number of write operations against the DB occurred.</h1><p>#</p>
<h1 id="满足以下条件将会同步数据"><a href="#满足以下条件将会同步数据" class="headerlink" title="满足以下条件将会同步数据:"></a>满足以下条件将会同步数据:</h1><h1 id="900秒（15分钟）内有1个更改"><a href="#900秒（15分钟）内有1个更改" class="headerlink" title="900秒（15分钟）内有1个更改"></a>900秒（15分钟）内有1个更改</h1><h1 id="300秒（5分钟）内有10个更改"><a href="#300秒（5分钟）内有10个更改" class="headerlink" title="300秒（5分钟）内有10个更改"></a>300秒（5分钟）内有10个更改</h1><h1 id="60秒内有10000个更改"><a href="#60秒内有10000个更改" class="headerlink" title="60秒内有10000个更改"></a>60秒内有10000个更改</h1><h1 id="Note-可以把所有“save”行注释掉，这样就取消同步操作了"><a href="#Note-可以把所有“save”行注释掉，这样就取消同步操作了" class="headerlink" title="Note: 可以把所有“save”行注释掉，这样就取消同步操作了"></a>Note: 可以把所有“save”行注释掉，这样就取消同步操作了</h1><p>save 900 1<br>save 300 10<br>save 60 10000</p>
<h1 id="指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大"><a href="#指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大" class="headerlink" title="指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大"></a>指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大</h1><p>rdbcompression yes</p>
<h1 id="指定本地数据库文件名，默认值为dump-rdb"><a href="#指定本地数据库文件名，默认值为dump-rdb" class="headerlink" title="指定本地数据库文件名，默认值为dump.rdb"></a>指定本地数据库文件名，默认值为dump.rdb</h1><p>dbfilename dump.rdb</p>
<h1 id="工作目录"><a href="#工作目录" class="headerlink" title="工作目录."></a>工作目录.</h1><h1 id="指定本地数据库存放目录，文件名由上一个dbfilename配置项指定"><a href="#指定本地数据库存放目录，文件名由上一个dbfilename配置项指定" class="headerlink" title="指定本地数据库存放目录，文件名由上一个dbfilename配置项指定"></a>指定本地数据库存放目录，文件名由上一个dbfilename配置项指定</h1><p># </p>
<h1 id="Also-the-Append-Only-File-will-be-created-inside-this-directory"><a href="#Also-the-Append-Only-File-will-be-created-inside-this-directory" class="headerlink" title="Also the Append Only File will be created inside this directory."></a>Also the Append Only File will be created inside this directory.</h1><p># </p>
<h1 id="注意，这里只能指定一个目录，不能指定文件名"><a href="#注意，这里只能指定一个目录，不能指定文件名" class="headerlink" title="注意，这里只能指定一个目录，不能指定文件名"></a>注意，这里只能指定一个目录，不能指定文件名</h1><p>dir ./</p>
<p>################################# REPLICATION #################################</p>
<h1 id="主从复制。使用slaveof从-Redis服务器复制一个Redis实例。注意，该配置仅限于当前slave有效"><a href="#主从复制。使用slaveof从-Redis服务器复制一个Redis实例。注意，该配置仅限于当前slave有效" class="headerlink" title="主从复制。使用slaveof从 Redis服务器复制一个Redis实例。注意，该配置仅限于当前slave有效"></a>主从复制。使用slaveof从 Redis服务器复制一个Redis实例。注意，该配置仅限于当前slave有效</h1><h1 id="so-for-example-it-is-possible-to-configure-the-slave-to-save-the-DB-with-a"><a href="#so-for-example-it-is-possible-to-configure-the-slave-to-save-the-DB-with-a" class="headerlink" title="so for example it is possible to configure the slave to save the DB with a"></a>so for example it is possible to configure the slave to save the DB with a</h1><h1 id="different-interval-or-to-listen-to-another-port-and-so-on"><a href="#different-interval-or-to-listen-to-another-port-and-so-on" class="headerlink" title="different interval, or to listen to another port, and so on."></a>different interval, or to listen to another port, and so on.</h1><h1 id="设置当本机为slav服务时，设置master服务的ip地址及端口，在Redis启动时，它会自动从master进行数据同步"><a href="#设置当本机为slav服务时，设置master服务的ip地址及端口，在Redis启动时，它会自动从master进行数据同步" class="headerlink" title="设置当本机为slav服务时，设置master服务的ip地址及端口，在Redis启动时，它会自动从master进行数据同步"></a>设置当本机为slav服务时，设置master服务的ip地址及端口，在Redis启动时，它会自动从master进行数据同步</h1><h1 id="slaveof"><a href="#slaveof" class="headerlink" title="slaveof  "></a>slaveof <masterip> <masterport></masterport></masterip></h1><h1 id="当master服务设置了密码保护时，slav服务连接master的密码"><a href="#当master服务设置了密码保护时，slav服务连接master的密码" class="headerlink" title="当master服务设置了密码保护时，slav服务连接master的密码"></a>当master服务设置了密码保护时，slav服务连接master的密码</h1><h1 id="下文的“requirepass”配置项可以指定密码"><a href="#下文的“requirepass”配置项可以指定密码" class="headerlink" title="下文的“requirepass”配置项可以指定密码"></a>下文的“requirepass”配置项可以指定密码</h1><h1 id="masterauth"><a href="#masterauth" class="headerlink" title="masterauth "></a>masterauth <master-password></master-password></h1><h1 id="When-a-slave-lost-the-connection-with-the-master-or-when-the-replication"><a href="#When-a-slave-lost-the-connection-with-the-master-or-when-the-replication" class="headerlink" title="When a slave lost the connection with the master, or when the replication"></a>When a slave lost the connection with the master, or when the replication</h1><h1 id="is-still-in-progress-the-slave-can-act-in-two-different-ways"><a href="#is-still-in-progress-the-slave-can-act-in-two-different-ways" class="headerlink" title="is still in progress, the slave can act in two different ways:"></a>is still in progress, the slave can act in two different ways:</h1><p>#</p>
<h1 id="1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will"><a href="#1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will" class="headerlink" title="1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will"></a>1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will</h1><h1 id="still-reply-to-client-requests-possibly-with-out-of-data-data-or-the"><a href="#still-reply-to-client-requests-possibly-with-out-of-data-data-or-the" class="headerlink" title="still reply to client requests, possibly with out of data data, or the"></a>still reply to client requests, possibly with out of data data, or the</h1><h1 id="data-set-may-just-be-empty-if-this-is-the-first-synchronization"><a href="#data-set-may-just-be-empty-if-this-is-the-first-synchronization" class="headerlink" title="data set may just be empty if this is the first synchronization."></a>data set may just be empty if this is the first synchronization.</h1><p>#</p>
<h1 id="2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with"><a href="#2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with" class="headerlink" title="2) if slave-serve-stale data is set to ‘no’ the slave will reply with"></a>2) if slave-serve-stale data is set to ‘no’ the slave will reply with</h1><h1 id="an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands"><a href="#an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands" class="headerlink" title="an error “SYNC with master in progress” to all the kind of commands"></a>an error “SYNC with master in progress” to all the kind of commands</h1><h1 id="but-to-INFO-and-SLAVEOF"><a href="#but-to-INFO-and-SLAVEOF" class="headerlink" title="but to INFO and SLAVEOF."></a>but to INFO and SLAVEOF.</h1><p>#<br>slave-serve-stale-data yes</p>
<h1 id="Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change"><a href="#Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change" class="headerlink" title="Slaves send PINGs to server in a predefined interval. It’s possible to change"></a>Slaves send PINGs to server in a predefined interval. It’s possible to change</h1><h1 id="this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10"><a href="#this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10" class="headerlink" title="this interval with the repl_ping_slave_period option. The default value is 10"></a>this interval with the repl_ping_slave_period option. The default value is 10</h1><h1 id="seconds"><a href="#seconds" class="headerlink" title="seconds."></a>seconds.</h1><p>#</p>
<h1 id="repl-ping-slave-period-10"><a href="#repl-ping-slave-period-10" class="headerlink" title="repl-ping-slave-period 10"></a>repl-ping-slave-period 10</h1><h1 id="The-following-option-sets-a-timeout-for-both-Bulk-transfer-I-O-timeout-and"><a href="#The-following-option-sets-a-timeout-for-both-Bulk-transfer-I-O-timeout-and" class="headerlink" title="The following option sets a timeout for both Bulk transfer I/O timeout and"></a>The following option sets a timeout for both Bulk transfer I/O timeout and</h1><h1 id="master-data-or-ping-response-timeout-The-default-value-is-60-seconds"><a href="#master-data-or-ping-response-timeout-The-default-value-is-60-seconds" class="headerlink" title="master data or ping response timeout. The default value is 60 seconds."></a>master data or ping response timeout. The default value is 60 seconds.</h1><p>#</p>
<h1 id="It-is-important-to-make-sure-that-this-value-is-greater-than-the-value"><a href="#It-is-important-to-make-sure-that-this-value-is-greater-than-the-value" class="headerlink" title="It is important to make sure that this value is greater than the value"></a>It is important to make sure that this value is greater than the value</h1><h1 id="specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected"><a href="#specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected" class="headerlink" title="specified for repl-ping-slave-period otherwise a timeout will be detected"></a>specified for repl-ping-slave-period otherwise a timeout will be detected</h1><h1 id="every-time-there-is-low-traffic-between-the-master-and-the-slave"><a href="#every-time-there-is-low-traffic-between-the-master-and-the-slave" class="headerlink" title="every time there is low traffic between the master and the slave."></a>every time there is low traffic between the master and the slave.</h1><p>#</p>
<h1 id="repl-timeout-60"><a href="#repl-timeout-60" class="headerlink" title="repl-timeout 60"></a>repl-timeout 60</h1><p>################################## SECURITY ###################################</p>
<h1 id="Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to"><a href="#Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to" class="headerlink" title="Warning: since Redis is pretty fast an outside user can try up to"></a>Warning: since Redis is pretty fast an outside user can try up to</h1><h1 id="150k-passwords-per-second-against-a-good-box-This-means-that-you-should"><a href="#150k-passwords-per-second-against-a-good-box-This-means-that-you-should" class="headerlink" title="150k passwords per second against a good box. This means that you should"></a>150k passwords per second against a good box. This means that you should</h1><h1 id="use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break"><a href="#use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break" class="headerlink" title="use a very strong password otherwise it will be very easy to break."></a>use a very strong password otherwise it will be very easy to break.</h1><h1 id="设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过auth-命令提供密码，默认关闭"><a href="#设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过auth-命令提供密码，默认关闭" class="headerlink" title="设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过auth 命令提供密码，默认关闭"></a>设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过auth <password>命令提供密码，默认关闭</password></h1><h1 id="requirepass-foobared"><a href="#requirepass-foobared" class="headerlink" title="requirepass foobared"></a>requirepass foobared</h1><h1 id="Command-renaming"><a href="#Command-renaming" class="headerlink" title="Command renaming."></a>Command renaming.</h1><p>#</p>
<h1 id="It-is-possilbe-to-change-the-name-of-dangerous-commands-in-a-shared"><a href="#It-is-possilbe-to-change-the-name-of-dangerous-commands-in-a-shared" class="headerlink" title="It is possilbe to change the name of dangerous commands in a shared"></a>It is possilbe to change the name of dangerous commands in a shared</h1><h1 id="environment-For-instance-the-CONFIG-command-may-be-renamed-into-something"><a href="#environment-For-instance-the-CONFIG-command-may-be-renamed-into-something" class="headerlink" title="environment. For instance the CONFIG command may be renamed into something"></a>environment. For instance the CONFIG command may be renamed into something</h1><h1 id="of-hard-to-guess-so-that-it-will-be-still-available-for-internal-use"><a href="#of-hard-to-guess-so-that-it-will-be-still-available-for-internal-use" class="headerlink" title="of hard to guess so that it will be still available for internal-use"></a>of hard to guess so that it will be still available for internal-use</h1><h1 id="tools-but-not-available-for-general-clients"><a href="#tools-but-not-available-for-general-clients" class="headerlink" title="tools but not available for general clients."></a>tools but not available for general clients.</h1><p>#</p>
<h1 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h1><p>#</p>
<h1 id="rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52"><a href="#rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52" class="headerlink" title="rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52"></a>rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</h1><p>#</p>
<h1 id="It-is-also-possilbe-to-completely-kill-a-command-renaming-it-into"><a href="#It-is-also-possilbe-to-completely-kill-a-command-renaming-it-into" class="headerlink" title="It is also possilbe to completely kill a command renaming it into"></a>It is also possilbe to completely kill a command renaming it into</h1><h1 id="an-empty-string"><a href="#an-empty-string" class="headerlink" title="an empty string:"></a>an empty string:</h1><p>#</p>
<h1 id="rename-command-CONFIG-“”"><a href="#rename-command-CONFIG-“”" class="headerlink" title="rename-command CONFIG “”"></a>rename-command CONFIG “”</h1><p>################################### LIMITS ####################################</p>
<h1 id="设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，"><a href="#设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，" class="headerlink" title="设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，"></a>设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，</h1><h1 id="如果设置maxclients-0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max-Number-of-clients-reached错误信息"><a href="#如果设置maxclients-0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max-Number-of-clients-reached错误信息" class="headerlink" title="如果设置maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max Number of clients reached错误信息"></a>如果设置maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max Number of clients reached错误信息</h1><h1 id="maxclients-128"><a href="#maxclients-128" class="headerlink" title="maxclients 128"></a>maxclients 128</h1><h1 id="Don’t-use-more-memory-than-the-specified-amount-of-bytes"><a href="#Don’t-use-more-memory-than-the-specified-amount-of-bytes" class="headerlink" title="Don’t use more memory than the specified amount of bytes."></a>Don’t use more memory than the specified amount of bytes.</h1><h1 id="When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys-with-an"><a href="#When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys-with-an" class="headerlink" title="When the memory limit is reached Redis will try to remove keys with an"></a>When the memory limit is reached Redis will try to remove keys with an</h1><h1 id="EXPIRE-set-It-will-try-to-start-freeing-keys-that-are-going-to-expire"><a href="#EXPIRE-set-It-will-try-to-start-freeing-keys-that-are-going-to-expire" class="headerlink" title="EXPIRE set. It will try to start freeing keys that are going to expire"></a>EXPIRE set. It will try to start freeing keys that are going to expire</h1><h1 id="in-little-time-and-preserve-keys-with-a-longer-time-to-live"><a href="#in-little-time-and-preserve-keys-with-a-longer-time-to-live" class="headerlink" title="in little time and preserve keys with a longer time to live."></a>in little time and preserve keys with a longer time to live.</h1><h1 id="Redis-will-also-try-to-remove-objects-from-free-lists-if-possible"><a href="#Redis-will-also-try-to-remove-objects-from-free-lists-if-possible" class="headerlink" title="Redis will also try to remove objects from free lists if possible."></a>Redis will also try to remove objects from free lists if possible.</h1><p>#</p>
<h1 id="If-all-this-fails-Redis-will-start-to-reply-with-errors-to-commands"><a href="#If-all-this-fails-Redis-will-start-to-reply-with-errors-to-commands" class="headerlink" title="If all this fails, Redis will start to reply with errors to commands"></a>If all this fails, Redis will start to reply with errors to commands</h1><h1 id="that-will-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue"><a href="#that-will-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue" class="headerlink" title="that will use more memory, like SET, LPUSH, and so on, and will continue"></a>that will use more memory, like SET, LPUSH, and so on, and will continue</h1><h1 id="to-reply-to-most-read-only-commands-like-GET"><a href="#to-reply-to-most-read-only-commands-like-GET" class="headerlink" title="to reply to most read-only commands like GET."></a>to reply to most read-only commands like GET.</h1><p>#</p>
<h1 id="WARNING-maxmemory-can-be-a-good-idea-mainly-if-you-want-to-use-Redis-as-a"><a href="#WARNING-maxmemory-can-be-a-good-idea-mainly-if-you-want-to-use-Redis-as-a" class="headerlink" title="WARNING: maxmemory can be a good idea mainly if you want to use Redis as a"></a>WARNING: maxmemory can be a good idea mainly if you want to use Redis as a</h1><h1 id="‘state’-server-or-cache-not-as-a-real-DB-When-Redis-is-used-as-a-real"><a href="#‘state’-server-or-cache-not-as-a-real-DB-When-Redis-is-used-as-a-real" class="headerlink" title="‘state’ server or cache, not as a real DB. When Redis is used as a real"></a>‘state’ server or cache, not as a real DB. When Redis is used as a real</h1><h1 id="database-the-memory-usage-will-grow-over-the-weeks-it-will-be-obvious-if"><a href="#database-the-memory-usage-will-grow-over-the-weeks-it-will-be-obvious-if" class="headerlink" title="database the memory usage will grow over the weeks, it will be obvious if"></a>database the memory usage will grow over the weeks, it will be obvious if</h1><h1 id="it-is-going-to-use-too-much-memory-in-the-long-run-and-you’ll-have-the-time"><a href="#it-is-going-to-use-too-much-memory-in-the-long-run-and-you’ll-have-the-time" class="headerlink" title="it is going to use too much memory in the long run, and you’ll have the time"></a>it is going to use too much memory in the long run, and you’ll have the time</h1><h1 id="to-upgrade-With-maxmemory-after-the-limit-is-reached-you’ll-start-to-get"><a href="#to-upgrade-With-maxmemory-after-the-limit-is-reached-you’ll-start-to-get" class="headerlink" title="to upgrade. With maxmemory after the limit is reached you’ll start to get"></a>to upgrade. With maxmemory after the limit is reached you’ll start to get</h1><h1 id="errors-for-write-operations-and-this-may-even-lead-to-DB-inconsistency"><a href="#errors-for-write-operations-and-this-may-even-lead-to-DB-inconsistency" class="headerlink" title="errors for write operations, and this may even lead to DB inconsistency."></a>errors for write operations, and this may even lead to DB inconsistency.</h1><h1 id="指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，"><a href="#指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，" class="headerlink" title="指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，"></a>指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，</h1><h1 id="当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。"><a href="#当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。" class="headerlink" title="当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。"></a>当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。</h1><h1 id="Redis新的vm机制，会把Key存放内存，Value会存放在swap区"><a href="#Redis新的vm机制，会把Key存放内存，Value会存放在swap区" class="headerlink" title="Redis新的vm机制，会把Key存放内存，Value会存放在swap区"></a>Redis新的vm机制，会把Key存放内存，Value会存放在swap区</h1><h1 id="maxmemory"><a href="#maxmemory" class="headerlink" title="maxmemory "></a>maxmemory <bytes></bytes></h1><h1 id="MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory"><a href="#MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory" class="headerlink" title="MAXMEMORY POLICY: how Redis will select what to remove when maxmemory"></a>MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</h1><h1 id="is-reached-You-can-select-among-five-behavior"><a href="#is-reached-You-can-select-among-five-behavior" class="headerlink" title="is reached? You can select among five behavior:"></a>is reached? You can select among five behavior:</h1><p># </p>
<h1 id="volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm"><a href="#volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm" class="headerlink" title="volatile-lru -&gt; remove the key with an expire set using an LRU algorithm"></a>volatile-lru -&gt; remove the key with an expire set using an LRU algorithm</h1><h1 id="allkeys-lru-gt-remove-any-key-accordingly-to-the-LRU-algorithm"><a href="#allkeys-lru-gt-remove-any-key-accordingly-to-the-LRU-algorithm" class="headerlink" title="allkeys-lru -&gt; remove any key accordingly to the LRU algorithm"></a>allkeys-lru -&gt; remove any key accordingly to the LRU algorithm</h1><h1 id="volatile-random-gt-remove-a-random-key-with-an-expire-set"><a href="#volatile-random-gt-remove-a-random-key-with-an-expire-set" class="headerlink" title="volatile-random -&gt; remove a random key with an expire set"></a>volatile-random -&gt; remove a random key with an expire set</h1><h1 id="allkeys-gt-random-gt-remove-a-random-key-any-key"><a href="#allkeys-gt-random-gt-remove-a-random-key-any-key" class="headerlink" title="allkeys-&gt;random -&gt; remove a random key, any key"></a>allkeys-&gt;random -&gt; remove a random key, any key</h1><h1 id="volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL"><a href="#volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL" class="headerlink" title="volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)"></a>volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)</h1><h1 id="noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations"><a href="#noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations" class="headerlink" title="noeviction -&gt; don’t expire at all, just return an error on write operations"></a>noeviction -&gt; don’t expire at all, just return an error on write operations</h1><p># </p>
<h1 id="Note-with-all-the-kind-of-policies-Redis-will-return-an-error-on-write"><a href="#Note-with-all-the-kind-of-policies-Redis-will-return-an-error-on-write" class="headerlink" title="Note: with all the kind of policies, Redis will return an error on write"></a>Note: with all the kind of policies, Redis will return an error on write</h1><h1 id="operations-when-there-are-not-suitable-keys-for-eviction"><a href="#operations-when-there-are-not-suitable-keys-for-eviction" class="headerlink" title="operations, when there are not suitable keys for eviction."></a>operations, when there are not suitable keys for eviction.</h1><p>#</p>
<h1 id="At-the-date-of-writing-this-commands-are-set-setnx-setex-append"><a href="#At-the-date-of-writing-this-commands-are-set-setnx-setex-append" class="headerlink" title="At the date of writing this commands are: set setnx setex append"></a>At the date of writing this commands are: set setnx setex append</h1><h1 id="incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd"><a href="#incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd" class="headerlink" title="incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd"></a>incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</h1><h1 id="sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby"><a href="#sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby" class="headerlink" title="sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby"></a>sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</h1><h1 id="zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby"><a href="#zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby" class="headerlink" title="zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby"></a>zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</h1><h1 id="getset-mset-msetnx-exec-sort"><a href="#getset-mset-msetnx-exec-sort" class="headerlink" title="getset mset msetnx exec sort"></a>getset mset msetnx exec sort</h1><p>#</p>
<h1 id="The-default-is"><a href="#The-default-is" class="headerlink" title="The default is:"></a>The default is:</h1><p>#</p>
<h1 id="maxmemory-policy-volatile-lru"><a href="#maxmemory-policy-volatile-lru" class="headerlink" title="maxmemory-policy volatile-lru"></a>maxmemory-policy volatile-lru</h1><h1 id="LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated"><a href="#LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated" class="headerlink" title="LRU and minimal TTL algorithms are not precise algorithms but approximated"></a>LRU and minimal TTL algorithms are not precise algorithms but approximated</h1><h1 id="algorithms-in-order-to-save-memory-so-you-can-select-as-well-the-sample"><a href="#algorithms-in-order-to-save-memory-so-you-can-select-as-well-the-sample" class="headerlink" title="algorithms (in order to save memory), so you can select as well the sample"></a>algorithms (in order to save memory), so you can select as well the sample</h1><h1 id="size-to-check-For-instance-for-default-Redis-will-check-three-keys-and"><a href="#size-to-check-For-instance-for-default-Redis-will-check-three-keys-and" class="headerlink" title="size to check. For instance for default Redis will check three keys and"></a>size to check. For instance for default Redis will check three keys and</h1><h1 id="pick-the-one-that-was-used-less-recently-you-can-change-the-sample-size"><a href="#pick-the-one-that-was-used-less-recently-you-can-change-the-sample-size" class="headerlink" title="pick the one that was used less recently, you can change the sample size"></a>pick the one that was used less recently, you can change the sample size</h1><h1 id="using-the-following-configuration-directive"><a href="#using-the-following-configuration-directive" class="headerlink" title="using the following configuration directive."></a>using the following configuration directive.</h1><p>#</p>
<h1 id="maxmemory-samples-3"><a href="#maxmemory-samples-3" class="headerlink" title="maxmemory-samples 3"></a>maxmemory-samples 3</h1><p>############################## APPEND ONLY MODE ###############################</p>
<p># </p>
<h1 id="Note-that-you-can-have-both-the-async-dumps-and-the-append-only-file-if-you"><a href="#Note-that-you-can-have-both-the-async-dumps-and-the-append-only-file-if-you" class="headerlink" title="Note that you can have both the async dumps and the append only file if you"></a>Note that you can have both the async dumps and the append only file if you</h1><h1 id="like-you-have-to-comment-the-“save”-statements-above-to-disable-the-dumps"><a href="#like-you-have-to-comment-the-“save”-statements-above-to-disable-the-dumps" class="headerlink" title="like (you have to comment the “save” statements above to disable the dumps)."></a>like (you have to comment the “save” statements above to disable the dumps).</h1><h1 id="Still-if-append-only-mode-is-enabled-Redis-will-load-the-data-from-the"><a href="#Still-if-append-only-mode-is-enabled-Redis-will-load-the-data-from-the" class="headerlink" title="Still if append only mode is enabled Redis will load the data from the"></a>Still if append only mode is enabled Redis will load the data from the</h1><h1 id="log-file-at-startup-ignoring-the-dump-rdb-file"><a href="#log-file-at-startup-ignoring-the-dump-rdb-file" class="headerlink" title="log file at startup ignoring the dump.rdb file."></a>log file at startup ignoring the dump.rdb file.</h1><h1 id="指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。"><a href="#指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。" class="headerlink" title="指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。"></a>指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。</h1><h1 id="因为redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no"><a href="#因为redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no" class="headerlink" title="因为redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no"></a>因为redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no</h1><h1 id="IMPORTANT-Check-the-BGREWRITEAOF-to-check-how-to-rewrite-the-append"><a href="#IMPORTANT-Check-the-BGREWRITEAOF-to-check-how-to-rewrite-the-append" class="headerlink" title="IMPORTANT: Check the BGREWRITEAOF to check how to rewrite the append"></a>IMPORTANT: Check the BGREWRITEAOF to check how to rewrite the append</h1><h1 id="log-file-in-background-when-it-gets-too-big"><a href="#log-file-in-background-when-it-gets-too-big" class="headerlink" title="log file in background when it gets too big."></a>log file in background when it gets too big.</h1><p>appendonly no</p>
<h1 id="指定更新日志文件名，默认为appendonly-aof"><a href="#指定更新日志文件名，默认为appendonly-aof" class="headerlink" title="指定更新日志文件名，默认为appendonly.aof"></a>指定更新日志文件名，默认为appendonly.aof</h1><h1 id="appendfilename-appendonly-aof"><a href="#appendfilename-appendonly-aof" class="headerlink" title="appendfilename appendonly.aof"></a>appendfilename appendonly.aof</h1><h1 id="The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk"><a href="#The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk" class="headerlink" title="The fsync() call tells the Operating System to actually write data on disk"></a>The fsync() call tells the Operating System to actually write data on disk</h1><h1 id="instead-to-wait-for-more-data-in-the-output-buffer-Some-OS-will-really-flush"><a href="#instead-to-wait-for-more-data-in-the-output-buffer-Some-OS-will-really-flush" class="headerlink" title="instead to wait for more data in the output buffer. Some OS will really flush"></a>instead to wait for more data in the output buffer. Some OS will really flush</h1><h1 id="data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP"><a href="#data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP" class="headerlink" title="data on disk, some other OS will just try to do it ASAP."></a>data on disk, some other OS will just try to do it ASAP.</h1><h1 id="指定更新日志条件，共有3个可选值："><a href="#指定更新日志条件，共有3个可选值：" class="headerlink" title="指定更新日志条件，共有3个可选值："></a>指定更新日志条件，共有3个可选值：</h1><h1 id="no-表示等操作系统进行数据缓存同步到磁盘（快）"><a href="#no-表示等操作系统进行数据缓存同步到磁盘（快）" class="headerlink" title="no:表示等操作系统进行数据缓存同步到磁盘（快）"></a>no:表示等操作系统进行数据缓存同步到磁盘（快）</h1><h1 id="always-表示每次更新操作后手动调用fsync-将数据写到磁盘（慢，安全）"><a href="#always-表示每次更新操作后手动调用fsync-将数据写到磁盘（慢，安全）" class="headerlink" title="always:表示每次更新操作后手动调用fsync()将数据写到磁盘（慢，安全）"></a>always:表示每次更新操作后手动调用fsync()将数据写到磁盘（慢，安全）</h1><h1 id="everysec-表示每秒同步一次（折衷，默认值）"><a href="#everysec-表示每秒同步一次（折衷，默认值）" class="headerlink" title="everysec:表示每秒同步一次（折衷，默认值）"></a>everysec:表示每秒同步一次（折衷，默认值）</h1><p>appendfsync everysec</p>
<h1 id="appendfsync-no"><a href="#appendfsync-no" class="headerlink" title="appendfsync no"></a>appendfsync no</h1><h1 id="When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background"><a href="#When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background" class="headerlink" title="When the AOF fsync policy is set to always or everysec, and a background"></a>When the AOF fsync policy is set to always or everysec, and a background</h1><h1 id="saving-process-a-background-save-or-AOF-log-background-rewriting-is"><a href="#saving-process-a-background-save-or-AOF-log-background-rewriting-is" class="headerlink" title="saving process (a background save or AOF log background rewriting) is"></a>saving process (a background save or AOF log background rewriting) is</h1><h1 id="performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations"><a href="#performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations" class="headerlink" title="performing a lot of I/O against the disk, in some Linux configurations"></a>performing a lot of I/O against the disk, in some Linux configurations</h1><h1 id="Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for"><a href="#Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for" class="headerlink" title="Redis may block too long on the fsync() call. Note that there is no fix for"></a>Redis may block too long on the fsync() call. Note that there is no fix for</h1><h1 id="this-currently-as-even-performing-fsync-in-a-different-thread-will-block"><a href="#this-currently-as-even-performing-fsync-in-a-different-thread-will-block" class="headerlink" title="this currently, as even performing fsync in a different thread will block"></a>this currently, as even performing fsync in a different thread will block</h1><h1 id="our-synchronous-write-2-call"><a href="#our-synchronous-write-2-call" class="headerlink" title="our synchronous write(2) call."></a>our synchronous write(2) call.</h1><p>#</p>
<h1 id="In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option"><a href="#In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option" class="headerlink" title="In order to mitigate this problem it’s possible to use the following option"></a>In order to mitigate this problem it’s possible to use the following option</h1><h1 id="that-will-prevent-fsync-from-being-called-in-the-main-process-while-a"><a href="#that-will-prevent-fsync-from-being-called-in-the-main-process-while-a" class="headerlink" title="that will prevent fsync() from being called in the main process while a"></a>that will prevent fsync() from being called in the main process while a</h1><h1 id="BGSAVE-or-BGREWRITEAOF-is-in-progress"><a href="#BGSAVE-or-BGREWRITEAOF-is-in-progress" class="headerlink" title="BGSAVE or BGREWRITEAOF is in progress."></a>BGSAVE or BGREWRITEAOF is in progress.</h1><p>#</p>
<h1 id="This-means-that-while-another-child-is-saving-the-durability-of-Redis-is"><a href="#This-means-that-while-another-child-is-saving-the-durability-of-Redis-is" class="headerlink" title="This means that while another child is saving the durability of Redis is"></a>This means that while another child is saving the durability of Redis is</h1><h1 id="the-same-as-“appendfsync-none”-that-in-pratical-terms-means-that-it-is"><a href="#the-same-as-“appendfsync-none”-that-in-pratical-terms-means-that-it-is" class="headerlink" title="the same as “appendfsync none”, that in pratical terms means that it is"></a>the same as “appendfsync none”, that in pratical terms means that it is</h1><h1 id="possible-to-lost-up-to-30-seconds-of-log-in-the-worst-scenario-with-the"><a href="#possible-to-lost-up-to-30-seconds-of-log-in-the-worst-scenario-with-the" class="headerlink" title="possible to lost up to 30 seconds of log in the worst scenario (with the"></a>possible to lost up to 30 seconds of log in the worst scenario (with the</h1><h1 id="default-Linux-settings"><a href="#default-Linux-settings" class="headerlink" title="default Linux settings)."></a>default Linux settings).</h1><p># </p>
<h1 id="If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as"><a href="#If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as" class="headerlink" title="If you have latency problems turn this to “yes”. Otherwise leave it as"></a>If you have latency problems turn this to “yes”. Otherwise leave it as</h1><h1 id="“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability"><a href="#“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability" class="headerlink" title="“no” that is the safest pick from the point of view of durability."></a>“no” that is the safest pick from the point of view of durability.</h1><p>no-appendfsync-on-rewrite no</p>
<h1 id="Automatic-rewrite-of-the-append-only-file"><a href="#Automatic-rewrite-of-the-append-only-file" class="headerlink" title="Automatic rewrite of the append only file."></a>Automatic rewrite of the append only file.</h1><h1 id="Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling"><a href="#Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling" class="headerlink" title="Redis is able to automatically rewrite the log file implicitly calling"></a>Redis is able to automatically rewrite the log file implicitly calling</h1><h1 id="BGREWRITEAOF-when-the-AOF-log-size-will-growth-by-the-specified-percentage"><a href="#BGREWRITEAOF-when-the-AOF-log-size-will-growth-by-the-specified-percentage" class="headerlink" title="BGREWRITEAOF when the AOF log size will growth by the specified percentage."></a>BGREWRITEAOF when the AOF log size will growth by the specified percentage.</h1><p># </p>
<h1 id="This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the"><a href="#This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the" class="headerlink" title="This is how it works: Redis remembers the size of the AOF file after the"></a>This is how it works: Redis remembers the size of the AOF file after the</h1><h1 id="latest-rewrite-or-if-no-rewrite-happened-since-the-restart-the-size-of"><a href="#latest-rewrite-or-if-no-rewrite-happened-since-the-restart-the-size-of" class="headerlink" title="latest rewrite (or if no rewrite happened since the restart, the size of"></a>latest rewrite (or if no rewrite happened since the restart, the size of</h1><h1 id="the-AOF-at-startup-is-used"><a href="#the-AOF-at-startup-is-used" class="headerlink" title="the AOF at startup is used)."></a>the AOF at startup is used).</h1><p>#</p>
<h1 id="This-base-size-is-compared-to-the-current-size-If-the-current-size-is"><a href="#This-base-size-is-compared-to-the-current-size-If-the-current-size-is" class="headerlink" title="This base size is compared to the current size. If the current size is"></a>This base size is compared to the current size. If the current size is</h1><h1 id="bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also"><a href="#bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also" class="headerlink" title="bigger than the specified percentage, the rewrite is triggered. Also"></a>bigger than the specified percentage, the rewrite is triggered. Also</h1><h1 id="you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this"><a href="#you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this" class="headerlink" title="you need to specify a minimal size for the AOF file to be rewritten, this"></a>you need to specify a minimal size for the AOF file to be rewritten, this</h1><h1 id="is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase"><a href="#is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase" class="headerlink" title="is useful to avoid rewriting the AOF file even if the percentage increase"></a>is useful to avoid rewriting the AOF file even if the percentage increase</h1><h1 id="is-reached-but-it-is-still-pretty-small"><a href="#is-reached-but-it-is-still-pretty-small" class="headerlink" title="is reached but it is still pretty small."></a>is reached but it is still pretty small.</h1><p>#</p>
<h1 id="Specify-a-precentage-of-zero-in-order-to-disable-the-automatic-AOF"><a href="#Specify-a-precentage-of-zero-in-order-to-disable-the-automatic-AOF" class="headerlink" title="Specify a precentage of zero in order to disable the automatic AOF"></a>Specify a precentage of zero in order to disable the automatic AOF</h1><h1 id="rewrite-feature"><a href="#rewrite-feature" class="headerlink" title="rewrite feature."></a>rewrite feature.</h1><p>auto-aof-rewrite-percentage 100<br>auto-aof-rewrite-min-size 64mb</p>
<p>################################## SLOW LOG ###################################</p>
<h1 id="The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified"><a href="#The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified" class="headerlink" title="The Redis Slow Log is a system to log queries that exceeded a specified"></a>The Redis Slow Log is a system to log queries that exceeded a specified</h1><h1 id="execution-time-The-execution-time-does-not-include-the-I-O-operations"><a href="#execution-time-The-execution-time-does-not-include-the-I-O-operations" class="headerlink" title="execution time. The execution time does not include the I/O operations"></a>execution time. The execution time does not include the I/O operations</h1><h1 id="like-talking-with-the-client-sending-the-reply-and-so-forth"><a href="#like-talking-with-the-client-sending-the-reply-and-so-forth" class="headerlink" title="like talking with the client, sending the reply and so forth,"></a>like talking with the client, sending the reply and so forth,</h1><h1 id="but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only"><a href="#but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only" class="headerlink" title="but just the time needed to actually execute the command (this is the only"></a>but just the time needed to actually execute the command (this is the only</h1><h1 id="stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve"><a href="#stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve" class="headerlink" title="stage of command execution where the thread is blocked and can not serve"></a>stage of command execution where the thread is blocked and can not serve</h1><h1 id="other-requests-in-the-meantime"><a href="#other-requests-in-the-meantime" class="headerlink" title="other requests in the meantime)."></a>other requests in the meantime).</h1><p># </p>
<h1 id="You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis"><a href="#You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis" class="headerlink" title="You can configure the slow log with two parameters: one tells Redis"></a>You can configure the slow log with two parameters: one tells Redis</h1><h1 id="what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the"><a href="#what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the" class="headerlink" title="what is the execution time, in microseconds, to exceed in order for the"></a>what is the execution time, in microseconds, to exceed in order for the</h1><h1 id="command-to-get-logged-and-the-other-parameter-is-the-length-of-the"><a href="#command-to-get-logged-and-the-other-parameter-is-the-length-of-the" class="headerlink" title="command to get logged, and the other parameter is the length of the"></a>command to get logged, and the other parameter is the length of the</h1><h1 id="slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the"><a href="#slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the" class="headerlink" title="slow log. When a new command is logged the oldest one is removed from the"></a>slow log. When a new command is logged the oldest one is removed from the</h1><h1 id="queue-of-logged-commands"><a href="#queue-of-logged-commands" class="headerlink" title="queue of logged commands."></a>queue of logged commands.</h1><h1 id="The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent"><a href="#The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent" class="headerlink" title="The following time is expressed in microseconds, so 1000000 is equivalent"></a>The following time is expressed in microseconds, so 1000000 is equivalent</h1><h1 id="to-one-second-Note-that-a-negative-number-disables-the-slow-log-while"><a href="#to-one-second-Note-that-a-negative-number-disables-the-slow-log-while" class="headerlink" title="to one second. Note that a negative number disables the slow log, while"></a>to one second. Note that a negative number disables the slow log, while</h1><h1 id="a-value-of-zero-forces-the-logging-of-every-command"><a href="#a-value-of-zero-forces-the-logging-of-every-command" class="headerlink" title="a value of zero forces the logging of every command."></a>a value of zero forces the logging of every command.</h1><p>slowlog-log-slower-than 10000</p>
<h1 id="There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory"><a href="#There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory" class="headerlink" title="There is no limit to this length. Just be aware that it will consume memory."></a>There is no limit to this length. Just be aware that it will consume memory.</h1><h1 id="You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET"><a href="#You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET" class="headerlink" title="You can reclaim memory used by the slow log with SLOWLOG RESET."></a>You can reclaim memory used by the slow log with SLOWLOG RESET.</h1><p>slowlog-max-len 1024</p>
<p>################################ VIRTUAL MEMORY ###############################</p>
<h3 id="WARNING-Virtual-Memory-is-deprecated-in-Redis-2-4"><a href="#WARNING-Virtual-Memory-is-deprecated-in-Redis-2-4" class="headerlink" title="WARNING! Virtual Memory is deprecated in Redis 2.4"></a>WARNING! Virtual Memory is deprecated in Redis 2.4</h3><h3 id="The-use-of-Virtual-Memory-is-strongly-discouraged"><a href="#The-use-of-Virtual-Memory-is-strongly-discouraged" class="headerlink" title="The use of Virtual Memory is strongly discouraged."></a>The use of Virtual Memory is strongly discouraged.</h3><h3 id="WARNING-Virtual-Memory-is-deprecated-in-Redis-2-4-1"><a href="#WARNING-Virtual-Memory-is-deprecated-in-Redis-2-4-1" class="headerlink" title="WARNING! Virtual Memory is deprecated in Redis 2.4"></a>WARNING! Virtual Memory is deprecated in Redis 2.4</h3><h3 id="The-use-of-Virtual-Memory-is-strongly-discouraged-1"><a href="#The-use-of-Virtual-Memory-is-strongly-discouraged-1" class="headerlink" title="The use of Virtual Memory is strongly discouraged."></a>The use of Virtual Memory is strongly discouraged.</h3><h1 id="Virtual-Memory-allows-Redis-to-work-with-datasets-bigger-than-the-actual"><a href="#Virtual-Memory-allows-Redis-to-work-with-datasets-bigger-than-the-actual" class="headerlink" title="Virtual Memory allows Redis to work with datasets bigger than the actual"></a>Virtual Memory allows Redis to work with datasets bigger than the actual</h1><h1 id="amount-of-RAM-needed-to-hold-the-whole-dataset-in-memory"><a href="#amount-of-RAM-needed-to-hold-the-whole-dataset-in-memory" class="headerlink" title="amount of RAM needed to hold the whole dataset in memory."></a>amount of RAM needed to hold the whole dataset in memory.</h1><h1 id="In-order-to-do-so-very-used-keys-are-taken-in-memory-while-the-other-keys"><a href="#In-order-to-do-so-very-used-keys-are-taken-in-memory-while-the-other-keys" class="headerlink" title="In order to do so very used keys are taken in memory while the other keys"></a>In order to do so very used keys are taken in memory while the other keys</h1><h1 id="are-swapped-into-a-swap-file-similarly-to-what-operating-systems-do"><a href="#are-swapped-into-a-swap-file-similarly-to-what-operating-systems-do" class="headerlink" title="are swapped into a swap file, similarly to what operating systems do"></a>are swapped into a swap file, similarly to what operating systems do</h1><h1 id="with-memory-pages"><a href="#with-memory-pages" class="headerlink" title="with memory pages."></a>with memory pages.</h1><h1 id="指定是否启用虚拟内存机制，默认值为no，"><a href="#指定是否启用虚拟内存机制，默认值为no，" class="headerlink" title="指定是否启用虚拟内存机制，默认值为no，"></a>指定是否启用虚拟内存机制，默认值为no，</h1><h1 id="VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中"><a href="#VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中" class="headerlink" title="VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中"></a>VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中</h1><h1 id="把vm-enabled设置为yes，根据需要设置好接下来的三个VM参数，就可以启动VM了"><a href="#把vm-enabled设置为yes，根据需要设置好接下来的三个VM参数，就可以启动VM了" class="headerlink" title="把vm-enabled设置为yes，根据需要设置好接下来的三个VM参数，就可以启动VM了"></a>把vm-enabled设置为yes，根据需要设置好接下来的三个VM参数，就可以启动VM了</h1><p>vm-enabled no</p>
<h1 id="vm-enabled-yes"><a href="#vm-enabled-yes" class="headerlink" title="vm-enabled yes"></a>vm-enabled yes</h1><h1 id="This-is-the-path-of-the-Redis-swap-file-As-you-can-guess-swap-files"><a href="#This-is-the-path-of-the-Redis-swap-file-As-you-can-guess-swap-files" class="headerlink" title="This is the path of the Redis swap file. As you can guess, swap files"></a>This is the path of the Redis swap file. As you can guess, swap files</h1><h1 id="can’t-be-shared-by-different-Redis-instances-so-make-sure-to-use-a-swap"><a href="#can’t-be-shared-by-different-Redis-instances-so-make-sure-to-use-a-swap" class="headerlink" title="can’t be shared by different Redis instances, so make sure to use a swap"></a>can’t be shared by different Redis instances, so make sure to use a swap</h1><h1 id="file-for-every-redis-process-you-are-running-Redis-will-complain-if-the"><a href="#file-for-every-redis-process-you-are-running-Redis-will-complain-if-the" class="headerlink" title="file for every redis process you are running. Redis will complain if the"></a>file for every redis process you are running. Redis will complain if the</h1><h1 id="swap-file-is-already-in-use"><a href="#swap-file-is-already-in-use" class="headerlink" title="swap file is already in use."></a>swap file is already in use.</h1><p>#</p>
<h1 id="Redis交换文件最好的存储是SSD（固态硬盘）"><a href="#Redis交换文件最好的存储是SSD（固态硬盘）" class="headerlink" title="Redis交换文件最好的存储是SSD（固态硬盘）"></a>Redis交换文件最好的存储是SSD（固态硬盘）</h1><h1 id="虚拟内存文件路径，默认值为-tmp-redis-swap，不可多个Redis实例共享"><a href="#虚拟内存文件路径，默认值为-tmp-redis-swap，不可多个Redis实例共享" class="headerlink" title="虚拟内存文件路径，默认值为/tmp/redis.swap，不可多个Redis实例共享"></a>虚拟内存文件路径，默认值为/tmp/redis.swap，不可多个Redis实例共享</h1><h1 id="WARNING-if-you-are-using-a-shared-hosting-the-default-of-putting"><a href="#WARNING-if-you-are-using-a-shared-hosting-the-default-of-putting" class="headerlink" title=" WARNING  if you are using a shared hosting the default of putting"></a><strong><em> WARNING </em></strong> if you are using a shared hosting the default of putting</h1><h1 id="the-swap-file-under-tmp-is-not-secure-Create-a-dir-with-access-granted"><a href="#the-swap-file-under-tmp-is-not-secure-Create-a-dir-with-access-granted" class="headerlink" title="the swap file under /tmp is not secure. Create a dir with access granted"></a>the swap file under /tmp is not secure. Create a dir with access granted</h1><h1 id="only-to-Redis-user-and-configure-Redis-to-create-the-swap-file-there"><a href="#only-to-Redis-user-and-configure-Redis-to-create-the-swap-file-there" class="headerlink" title="only to Redis user and configure Redis to create the swap file there."></a>only to Redis user and configure Redis to create the swap file there.</h1><p>vm-swap-file /tmp/redis.swap</p>
<h1 id="With-vm-max-memory-0-the-system-will-swap-everything-it-can-Not-a-good"><a href="#With-vm-max-memory-0-the-system-will-swap-everything-it-can-Not-a-good" class="headerlink" title="With vm-max-memory 0 the system will swap everything it can. Not a good"></a>With vm-max-memory 0 the system will swap everything it can. Not a good</h1><h1 id="default-just-specify-the-max-amount-of-RAM-you-can-in-bytes-but-it’s"><a href="#default-just-specify-the-max-amount-of-RAM-you-can-in-bytes-but-it’s" class="headerlink" title="default, just specify the max amount of RAM you can in bytes, but it’s"></a>default, just specify the max amount of RAM you can in bytes, but it’s</h1><h1 id="better-to-leave-some-margin-For-instance-specify-an-amount-of-RAM"><a href="#better-to-leave-some-margin-For-instance-specify-an-amount-of-RAM" class="headerlink" title="better to leave some margin. For instance specify an amount of RAM"></a>better to leave some margin. For instance specify an amount of RAM</h1><h1 id="that’s-more-or-less-between-60-and-80-of-your-free-RAM"><a href="#that’s-more-or-less-between-60-and-80-of-your-free-RAM" class="headerlink" title="that’s more or less between 60 and 80% of your free RAM."></a>that’s more or less between 60 and 80% of your free RAM.</h1><h1 id="将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多少，所有索引数据都是内存存储的（Redis的索引数据就是keys）"><a href="#将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多少，所有索引数据都是内存存储的（Redis的索引数据就是keys）" class="headerlink" title="将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多少，所有索引数据都是内存存储的（Redis的索引数据就是keys）"></a>将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多少，所有索引数据都是内存存储的（Redis的索引数据就是keys）</h1><h1 id="也就是说当vm-max-memory设置为0的时候，其实是所有value都存在于磁盘。默认值为0"><a href="#也就是说当vm-max-memory设置为0的时候，其实是所有value都存在于磁盘。默认值为0" class="headerlink" title="也就是说当vm-max-memory设置为0的时候，其实是所有value都存在于磁盘。默认值为0"></a>也就是说当vm-max-memory设置为0的时候，其实是所有value都存在于磁盘。默认值为0</h1><p>vm-max-memory 0</p>
<h1 id="Redis-swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的。"><a href="#Redis-swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的。" class="headerlink" title="Redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的。"></a>Redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的。</h1><h1 id="建议如果存储很多小对象，page大小最后设置为32或64bytes；如果存储很大的对象，则可以使用更大的page，如果不确定，就使用默认值"><a href="#建议如果存储很多小对象，page大小最后设置为32或64bytes；如果存储很大的对象，则可以使用更大的page，如果不确定，就使用默认值" class="headerlink" title="建议如果存储很多小对象，page大小最后设置为32或64bytes；如果存储很大的对象，则可以使用更大的page，如果不确定，就使用默认值"></a>建议如果存储很多小对象，page大小最后设置为32或64bytes；如果存储很大的对象，则可以使用更大的page，如果不确定，就使用默认值</h1><p>vm-page-size 32</p>
<h1 id="设置swap文件中的page数量由于页表（一种表示页面空闲或使用的bitmap）是存放在内存中的，在磁盘上每8个pages将消耗1byte的内存"><a href="#设置swap文件中的page数量由于页表（一种表示页面空闲或使用的bitmap）是存放在内存中的，在磁盘上每8个pages将消耗1byte的内存" class="headerlink" title="设置swap文件中的page数量由于页表（一种表示页面空闲或使用的bitmap）是存放在内存中的，在磁盘上每8个pages将消耗1byte的内存"></a>设置swap文件中的page数量由于页表（一种表示页面空闲或使用的bitmap）是存放在内存中的，在磁盘上每8个pages将消耗1byte的内存</h1><h1 id="swap空间总容量为-vm-page-size-vm-pages"><a href="#swap空间总容量为-vm-page-size-vm-pages" class="headerlink" title="swap空间总容量为 vm-page-size * vm-pages"></a>swap空间总容量为 vm-page-size * vm-pages</h1><p>#</p>
<h1 id="With-the-default-of-32-bytes-memory-pages-and-134217728-pages-Redis-will"><a href="#With-the-default-of-32-bytes-memory-pages-and-134217728-pages-Redis-will" class="headerlink" title="With the default of 32-bytes memory pages and 134217728 pages Redis will"></a>With the default of 32-bytes memory pages and 134217728 pages Redis will</h1><h1 id="use-a-4-GB-swap-file-that-will-use-16-MB-of-RAM-for-the-page-table"><a href="#use-a-4-GB-swap-file-that-will-use-16-MB-of-RAM-for-the-page-table" class="headerlink" title="use a 4 GB swap file, that will use 16 MB of RAM for the page table."></a>use a 4 GB swap file, that will use 16 MB of RAM for the page table.</h1><p>#</p>
<h1 id="It’s-better-to-use-the-smallest-acceptable-value-for-your-application"><a href="#It’s-better-to-use-the-smallest-acceptable-value-for-your-application" class="headerlink" title="It’s better to use the smallest acceptable value for your application,"></a>It’s better to use the smallest acceptable value for your application,</h1><h1 id="but-the-default-is-large-in-order-to-work-in-most-conditions"><a href="#but-the-default-is-large-in-order-to-work-in-most-conditions" class="headerlink" title="but the default is large in order to work in most conditions."></a>but the default is large in order to work in most conditions.</h1><p>vm-pages 134217728</p>
<h1 id="Max-number-of-VM-I-O-threads-running-at-the-same-time"><a href="#Max-number-of-VM-I-O-threads-running-at-the-same-time" class="headerlink" title="Max number of VM I/O threads running at the same time."></a>Max number of VM I/O threads running at the same time.</h1><h1 id="This-threads-are-used-to-read-write-data-from-to-swap-file-since-they"><a href="#This-threads-are-used-to-read-write-data-from-to-swap-file-since-they" class="headerlink" title="This threads are used to read/write data from/to swap file, since they"></a>This threads are used to read/write data from/to swap file, since they</h1><h1 id="also-encode-and-decode-objects-from-disk-to-memory-or-the-reverse-a-bigger"><a href="#also-encode-and-decode-objects-from-disk-to-memory-or-the-reverse-a-bigger" class="headerlink" title="also encode and decode objects from disk to memory or the reverse, a bigger"></a>also encode and decode objects from disk to memory or the reverse, a bigger</h1><h1 id="number-of-threads-can-help-with-big-objects-even-if-they-can’t-help-with"><a href="#number-of-threads-can-help-with-big-objects-even-if-they-can’t-help-with" class="headerlink" title="number of threads can help with big objects even if they can’t help with"></a>number of threads can help with big objects even if they can’t help with</h1><h1 id="I-O-itself-as-the-physical-device-may-not-be-able-to-couple-with-many"><a href="#I-O-itself-as-the-physical-device-may-not-be-able-to-couple-with-many" class="headerlink" title="I/O itself as the physical device may not be able to couple with many"></a>I/O itself as the physical device may not be able to couple with many</h1><h1 id="reads-writes-operations-at-the-same-time"><a href="#reads-writes-operations-at-the-same-time" class="headerlink" title="reads/writes operations at the same time."></a>reads/writes operations at the same time.</h1><h1 id="设置访问swap文件的I-O线程数，最后不要超过机器的核数，如果设置为0，那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟，默认值为4"><a href="#设置访问swap文件的I-O线程数，最后不要超过机器的核数，如果设置为0，那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟，默认值为4" class="headerlink" title="设置访问swap文件的I/O线程数，最后不要超过机器的核数，如果设置为0，那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟，默认值为4"></a>设置访问swap文件的I/O线程数，最后不要超过机器的核数，如果设置为0，那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟，默认值为4</h1><p>vm-max-threads 4</p>
<p>############################### ADVANCED CONFIG ###############################</p>
<h1 id="Hashes-are-encoded-in-a-special-way-much-more-memory-efficient-when-they"><a href="#Hashes-are-encoded-in-a-special-way-much-more-memory-efficient-when-they" class="headerlink" title="Hashes are encoded in a special way (much more memory efficient) when they"></a>Hashes are encoded in a special way (much more memory efficient) when they</h1><h1 id="have-at-max-a-given-numer-of-elements-and-the-biggest-element-does-not"><a href="#have-at-max-a-given-numer-of-elements-and-the-biggest-element-does-not" class="headerlink" title="have at max a given numer of elements, and the biggest element does not"></a>have at max a given numer of elements, and the biggest element does not</h1><h1 id="exceed-a-given-threshold-You-can-configure-this-limits-with-the-following"><a href="#exceed-a-given-threshold-You-can-configure-this-limits-with-the-following" class="headerlink" title="exceed a given threshold. You can configure this limits with the following"></a>exceed a given threshold. You can configure this limits with the following</h1><h1 id="configuration-directives"><a href="#configuration-directives" class="headerlink" title="configuration directives."></a>configuration directives.</h1><h1 id="指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法"><a href="#指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法" class="headerlink" title="指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法"></a>指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</h1><p>hash-max-zipmap-entries 512<br>hash-max-zipmap-value 64</p>
<h1 id="Similarly-to-hashes-small-lists-are-also-encoded-in-a-special-way-in-order"><a href="#Similarly-to-hashes-small-lists-are-also-encoded-in-a-special-way-in-order" class="headerlink" title="Similarly to hashes, small lists are also encoded in a special way in order"></a>Similarly to hashes, small lists are also encoded in a special way in order</h1><h1 id="to-save-a-lot-of-space-The-special-representation-is-only-used-when"><a href="#to-save-a-lot-of-space-The-special-representation-is-only-used-when" class="headerlink" title="to save a lot of space. The special representation is only used when"></a>to save a lot of space. The special representation is only used when</h1><h1 id="you-are-under-the-following-limits"><a href="#you-are-under-the-following-limits" class="headerlink" title="you are under the following limits:"></a>you are under the following limits:</h1><p>list-max-ziplist-entries 512<br>list-max-ziplist-value 64</p>
<h1 id="Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed"><a href="#Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed" class="headerlink" title="Sets have a special encoding in just one case: when a set is composed"></a>Sets have a special encoding in just one case: when a set is composed</h1><h1 id="of-just-strings-that-happens-to-be-integers-in-radix-10-in-the-range"><a href="#of-just-strings-that-happens-to-be-integers-in-radix-10-in-the-range" class="headerlink" title="of just strings that happens to be integers in radix 10 in the range"></a>of just strings that happens to be integers in radix 10 in the range</h1><h1 id="of-64-bit-signed-integers"><a href="#of-64-bit-signed-integers" class="headerlink" title="of 64 bit signed integers."></a>of 64 bit signed integers.</h1><h1 id="The-following-configuration-setting-sets-the-limit-in-the-size-of-the"><a href="#The-following-configuration-setting-sets-the-limit-in-the-size-of-the" class="headerlink" title="The following configuration setting sets the limit in the size of the"></a>The following configuration setting sets the limit in the size of the</h1><h1 id="set-in-order-to-use-this-special-memory-saving-encoding"><a href="#set-in-order-to-use-this-special-memory-saving-encoding" class="headerlink" title="set in order to use this special memory saving encoding."></a>set in order to use this special memory saving encoding.</h1><p>set-max-intset-entries 512</p>
<h1 id="Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in"><a href="#Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in" class="headerlink" title="Similarly to hashes and lists, sorted sets are also specially encoded in"></a>Similarly to hashes and lists, sorted sets are also specially encoded in</h1><h1 id="order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and"><a href="#order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and" class="headerlink" title="order to save a lot of space. This encoding is only used when the length and"></a>order to save a lot of space. This encoding is only used when the length and</h1><h1 id="elements-of-a-sorted-set-are-below-the-following-limits"><a href="#elements-of-a-sorted-set-are-below-the-following-limits" class="headerlink" title="elements of a sorted set are below the following limits:"></a>elements of a sorted set are below the following limits:</h1><p>zset-max-ziplist-entries 128<br>zset-max-ziplist-value 64</p>
<h1 id="Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in"><a href="#Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in" class="headerlink" title="Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in"></a>Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in</h1><h1 id="order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level"><a href="#order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level" class="headerlink" title="order to help rehashing the main Redis hash table (the one mapping top-level"></a>order to help rehashing the main Redis hash table (the one mapping top-level</h1><h1 id="keys-to-values-The-hash-table-implementation-redis-uses-see-dict-c"><a href="#keys-to-values-The-hash-table-implementation-redis-uses-see-dict-c" class="headerlink" title="keys to values). The hash table implementation redis uses (see dict.c)"></a>keys to values). The hash table implementation redis uses (see dict.c)</h1><h1 id="performs-a-lazy-rehashing-the-more-operation-you-run-into-an-hash-table"><a href="#performs-a-lazy-rehashing-the-more-operation-you-run-into-an-hash-table" class="headerlink" title="performs a lazy rehashing: the more operation you run into an hash table"></a>performs a lazy rehashing: the more operation you run into an hash table</h1><h1 id="that-is-rhashing-the-more-rehashing-“steps”-are-performed-so-if-the"><a href="#that-is-rhashing-the-more-rehashing-“steps”-are-performed-so-if-the" class="headerlink" title="that is rhashing, the more rehashing “steps” are performed, so if the"></a>that is rhashing, the more rehashing “steps” are performed, so if the</h1><h1 id="server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used"><a href="#server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used" class="headerlink" title="server is idle the rehashing is never complete and some more memory is used"></a>server is idle the rehashing is never complete and some more memory is used</h1><h1 id="by-the-hash-table"><a href="#by-the-hash-table" class="headerlink" title="by the hash table."></a>by the hash table.</h1><p># </p>
<h1 id="The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to"><a href="#The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to" class="headerlink" title="The default is to use this millisecond 10 times every second in order to"></a>The default is to use this millisecond 10 times every second in order to</h1><h1 id="active-rehashing-the-main-dictionaries-freeing-memory-when-possible"><a href="#active-rehashing-the-main-dictionaries-freeing-memory-when-possible" class="headerlink" title="active rehashing the main dictionaries, freeing memory when possible."></a>active rehashing the main dictionaries, freeing memory when possible.</h1><p>#</p>
<h1 id="If-unsure"><a href="#If-unsure" class="headerlink" title="If unsure:"></a>If unsure:</h1><h1 id="use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is"><a href="#use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is" class="headerlink" title="use “activerehashing no” if you have hard latency requirements and it is"></a>use “activerehashing no” if you have hard latency requirements and it is</h1><h1 id="not-a-good-thing-in-your-environment-that-Redis-can-reply-form-time-to-time"><a href="#not-a-good-thing-in-your-environment-that-Redis-can-reply-form-time-to-time" class="headerlink" title="not a good thing in your environment that Redis can reply form time to time"></a>not a good thing in your environment that Redis can reply form time to time</h1><h1 id="to-queries-with-2-milliseconds-delay"><a href="#to-queries-with-2-milliseconds-delay" class="headerlink" title="to queries with 2 milliseconds delay."></a>to queries with 2 milliseconds delay.</h1><h1 id="指定是否激活重置哈希，默认为开启"><a href="#指定是否激活重置哈希，默认为开启" class="headerlink" title="指定是否激活重置哈希，默认为开启"></a>指定是否激活重置哈希，默认为开启</h1><p>activerehashing yes</p>
<p>################################## INCLUDES ###################################</p>
<h1 id="指定包含其他的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各实例又拥有自己的特定配置文件"><a href="#指定包含其他的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各实例又拥有自己的特定配置文件" class="headerlink" title="指定包含其他的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各实例又拥有自己的特定配置文件"></a>指定包含其他的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各实例又拥有自己的特定配置文件</h1><h1 id="include-path-to-local-conf"><a href="#include-path-to-local-conf" class="headerlink" title="include /path/to/local.conf"></a>include /path/to/local.conf</h1><h1 id="include-path-to-other-conf"><a href="#include-path-to-other-conf" class="headerlink" title="include /path/to/other.conf"></a>include /path/to/other.conf</h1>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/06/30/startuml/" rel="next" title="startuml">
                <i class="fa fa-chevron-left"></i> startuml
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Inhaltsverzeichnis
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Übersicht
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="hellen" />
          <p class="site-author-name" itemprop="name">hellen</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis配置文件样例"><span class="nav-number">1.</span> <span class="nav-text">Redis配置文件样例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-on-units-when-memory-size-is-needed-it-is-possible-to-specifiy"><span class="nav-number">2.</span> <span class="nav-text">Note on units: when memory size is needed, it is possible to specifiy</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#it-in-the-usual-form-of-1k-5GB-4M-and-so-forth"><span class="nav-number">3.</span> <span class="nav-text">it in the usual form of 1k 5GB 4M and so forth:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1k-gt-1000-bytes"><span class="nav-number">4.</span> <span class="nav-text">1k => 1000 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1kb-gt-1024-bytes"><span class="nav-number">5.</span> <span class="nav-text">1kb => 1024 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1m-gt-1000000-bytes"><span class="nav-number">6.</span> <span class="nav-text">1m => 1000000 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1mb-gt-1024-1024-bytes"><span class="nav-number">7.</span> <span class="nav-text">1mb => 1024*1024 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1g-gt-1000000000-bytes"><span class="nav-number">8.</span> <span class="nav-text">1g => 1000000000 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1gb-gt-102410241024-bytes"><span class="nav-number">9.</span> <span class="nav-text">1gb => 102410241024 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same"><span class="nav-number">10.</span> <span class="nav-text">units are case insensitive so 1GB 1Gb 1gB are all the same.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程"><span class="nav-number">11.</span> <span class="nav-text">Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#启用守护进程后，Redis会把pid写到一个pidfile中，在-var-run-redis-pid"><span class="nav-number">12.</span> <span class="nav-text">启用守护进程后，Redis会把pid写到一个pidfile中，在/var/run/redis.pid</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#当Redis以守护进程方式运行时，Redis默认会把pid写入-var-run-redis-pid文件，可以通过pidfile指定"><span class="nav-number">13.</span> <span class="nav-text">当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定Redis监听端口，默认端口为6379"><span class="nav-number">14.</span> <span class="nav-text">指定Redis监听端口，默认端口为6379</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如果指定0端口，表示Redis不监听TCP连接"><span class="nav-number">15.</span> <span class="nav-text">如果指定0端口，表示Redis不监听TCP连接</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#绑定的主机地址"><span class="nav-number">16.</span> <span class="nav-text">绑定的主机地址</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接"><span class="nav-number">17.</span> <span class="nav-text">你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bind-127-0-0-1"><span class="nav-number">18.</span> <span class="nav-text">bind 127.0.0.1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-path-for-the-unix-socket-that-will-be-used-to-listen-for"><span class="nav-number">19.</span> <span class="nav-text">Specify the path for the unix socket that will be used to listen for</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#incoming-connections-There-is-no-default-so-Redis-will-not-listen"><span class="nav-number">20.</span> <span class="nav-text">incoming connections. There is no default, so Redis will not listen</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#on-a-unix-socket-when-not-specified"><span class="nav-number">21.</span> <span class="nav-text">on a unix socket when not specified.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#unixsocket-tmp-redis-sock"><span class="nav-number">22.</span> <span class="nav-text">unixsocket /tmp/redis.sock</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#unixsocketperm-755"><span class="nav-number">23.</span> <span class="nav-text">unixsocketperm 755</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能"><span class="nav-number">24.</span> <span class="nav-text">当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose"><span class="nav-number">25.</span> <span class="nav-text">指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#debug-很多信息-对开发／测试比较有用"><span class="nav-number">26.</span> <span class="nav-text">debug (很多信息, 对开发／测试比较有用)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level"><span class="nav-number">27.</span> <span class="nav-text">verbose (many rarely useful info, but not a mess like the debug level)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#notice-moderately-verbose-what-you-want-in-production-probably"><span class="nav-number">28.</span> <span class="nav-text">notice (moderately verbose, what you want in production probably)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#warning-only-very-important-critical-messages-are-logged"><span class="nav-number">29.</span> <span class="nav-text">warning (only very important / critical messages are logged)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给-dev-null"><span class="nav-number">30.</span> <span class="nav-text">日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给/dev/null</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes"><span class="nav-number">31.</span> <span class="nav-text">To enable logging to the system logger, just set ‘syslog-enabled’ to yes,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-optionally-update-the-other-syslog-parameters-to-suit-your-needs"><span class="nav-number">32.</span> <span class="nav-text">and optionally update the other syslog parameters to suit your needs.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#syslog-enabled-no"><span class="nav-number">33.</span> <span class="nav-text">syslog-enabled no</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-syslog-identity"><span class="nav-number">34.</span> <span class="nav-text">Specify the syslog identity.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#syslog-ident-redis"><span class="nav-number">35.</span> <span class="nav-text">syslog-ident redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7"><span class="nav-number">36.</span> <span class="nav-text">Specify the syslog facility.  Must be USER or between LOCAL0-LOCAL7.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#syslog-facility-local0"><span class="nav-number">37.</span> <span class="nav-text">syslog-facility local0</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设置数据库的数量，默认数据库为0，可以使用select-命令在连接上指定数据库id"><span class="nav-number">38.</span> <span class="nav-text">设置数据库的数量，默认数据库为0，可以使用select 命令在连接上指定数据库id</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dbid是从0到‘databases’-1的数目"><span class="nav-number">39.</span> <span class="nav-text">dbid是从0到‘databases’-1的数目</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合"><span class="nav-number">40.</span> <span class="nav-text">指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Save-the-DB-on-disk"><span class="nav-number">41.</span> <span class="nav-text">Save the DB on disk:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#save"><span class="nav-number">42.</span> <span class="nav-text">save  </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given"><span class="nav-number">43.</span> <span class="nav-text">Will save the DB if both the given number of seconds and the given</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#number-of-write-operations-against-the-DB-occurred"><span class="nav-number">44.</span> <span class="nav-text">number of write operations against the DB occurred.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#满足以下条件将会同步数据"><span class="nav-number">45.</span> <span class="nav-text">满足以下条件将会同步数据:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#900秒（15分钟）内有1个更改"><span class="nav-number">46.</span> <span class="nav-text">900秒（15分钟）内有1个更改</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#300秒（5分钟）内有10个更改"><span class="nav-number">47.</span> <span class="nav-text">300秒（5分钟）内有10个更改</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#60秒内有10000个更改"><span class="nav-number">48.</span> <span class="nav-text">60秒内有10000个更改</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-可以把所有“save”行注释掉，这样就取消同步操作了"><span class="nav-number">49.</span> <span class="nav-text">Note: 可以把所有“save”行注释掉，这样就取消同步操作了</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大"><span class="nav-number">50.</span> <span class="nav-text">指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定本地数据库文件名，默认值为dump-rdb"><span class="nav-number">51.</span> <span class="nav-text">指定本地数据库文件名，默认值为dump.rdb</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#工作目录"><span class="nav-number">52.</span> <span class="nav-text">工作目录.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定本地数据库存放目录，文件名由上一个dbfilename配置项指定"><span class="nav-number">53.</span> <span class="nav-text">指定本地数据库存放目录，文件名由上一个dbfilename配置项指定</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Also-the-Append-Only-File-will-be-created-inside-this-directory"><span class="nav-number">54.</span> <span class="nav-text">Also the Append Only File will be created inside this directory.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#注意，这里只能指定一个目录，不能指定文件名"><span class="nav-number">55.</span> <span class="nav-text">注意，这里只能指定一个目录，不能指定文件名</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#主从复制。使用slaveof从-Redis服务器复制一个Redis实例。注意，该配置仅限于当前slave有效"><span class="nav-number">56.</span> <span class="nav-text">主从复制。使用slaveof从 Redis服务器复制一个Redis实例。注意，该配置仅限于当前slave有效</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#so-for-example-it-is-possible-to-configure-the-slave-to-save-the-DB-with-a"><span class="nav-number">57.</span> <span class="nav-text">so for example it is possible to configure the slave to save the DB with a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#different-interval-or-to-listen-to-another-port-and-so-on"><span class="nav-number">58.</span> <span class="nav-text">different interval, or to listen to another port, and so on.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设置当本机为slav服务时，设置master服务的ip地址及端口，在Redis启动时，它会自动从master进行数据同步"><span class="nav-number">59.</span> <span class="nav-text">设置当本机为slav服务时，设置master服务的ip地址及端口，在Redis启动时，它会自动从master进行数据同步</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slaveof"><span class="nav-number">60.</span> <span class="nav-text">slaveof  </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#当master服务设置了密码保护时，slav服务连接master的密码"><span class="nav-number">61.</span> <span class="nav-text">当master服务设置了密码保护时，slav服务连接master的密码</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#下文的“requirepass”配置项可以指定密码"><span class="nav-number">62.</span> <span class="nav-text">下文的“requirepass”配置项可以指定密码</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#masterauth"><span class="nav-number">63.</span> <span class="nav-text">masterauth </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-a-slave-lost-the-connection-with-the-master-or-when-the-replication"><span class="nav-number">64.</span> <span class="nav-text">When a slave lost the connection with the master, or when the replication</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-still-in-progress-the-slave-can-act-in-two-different-ways"><span class="nav-number">65.</span> <span class="nav-text">is still in progress, the slave can act in two different ways:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will"><span class="nav-number">66.</span> <span class="nav-text">1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#still-reply-to-client-requests-possibly-with-out-of-data-data-or-the"><span class="nav-number">67.</span> <span class="nav-text">still reply to client requests, possibly with out of data data, or the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#data-set-may-just-be-empty-if-this-is-the-first-synchronization"><span class="nav-number">68.</span> <span class="nav-text">data set may just be empty if this is the first synchronization.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with"><span class="nav-number">69.</span> <span class="nav-text">2) if slave-serve-stale data is set to ‘no’ the slave will reply with</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands"><span class="nav-number">70.</span> <span class="nav-text">an error “SYNC with master in progress” to all the kind of commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-to-INFO-and-SLAVEOF"><span class="nav-number">71.</span> <span class="nav-text">but to INFO and SLAVEOF.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change"><span class="nav-number">72.</span> <span class="nav-text">Slaves send PINGs to server in a predefined interval. It’s possible to change</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10"><span class="nav-number">73.</span> <span class="nav-text">this interval with the repl_ping_slave_period option. The default value is 10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#seconds"><span class="nav-number">74.</span> <span class="nav-text">seconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#repl-ping-slave-period-10"><span class="nav-number">75.</span> <span class="nav-text">repl-ping-slave-period 10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-following-option-sets-a-timeout-for-both-Bulk-transfer-I-O-timeout-and"><span class="nav-number">76.</span> <span class="nav-text">The following option sets a timeout for both Bulk transfer I/O timeout and</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#master-data-or-ping-response-timeout-The-default-value-is-60-seconds"><span class="nav-number">77.</span> <span class="nav-text">master data or ping response timeout. The default value is 60 seconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-important-to-make-sure-that-this-value-is-greater-than-the-value"><span class="nav-number">78.</span> <span class="nav-text">It is important to make sure that this value is greater than the value</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected"><span class="nav-number">79.</span> <span class="nav-text">specified for repl-ping-slave-period otherwise a timeout will be detected</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#every-time-there-is-low-traffic-between-the-master-and-the-slave"><span class="nav-number">80.</span> <span class="nav-text">every time there is low traffic between the master and the slave.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#repl-timeout-60"><span class="nav-number">81.</span> <span class="nav-text">repl-timeout 60</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to"><span class="nav-number">82.</span> <span class="nav-text">Warning: since Redis is pretty fast an outside user can try up to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#150k-passwords-per-second-against-a-good-box-This-means-that-you-should"><span class="nav-number">83.</span> <span class="nav-text">150k passwords per second against a good box. This means that you should</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break"><span class="nav-number">84.</span> <span class="nav-text">use a very strong password otherwise it will be very easy to break.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过auth-命令提供密码，默认关闭"><span class="nav-number">85.</span> <span class="nav-text">设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过auth 命令提供密码，默认关闭</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#requirepass-foobared"><span class="nav-number">86.</span> <span class="nav-text">requirepass foobared</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Command-renaming"><span class="nav-number">87.</span> <span class="nav-text">Command renaming.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-possilbe-to-change-the-name-of-dangerous-commands-in-a-shared"><span class="nav-number">88.</span> <span class="nav-text">It is possilbe to change the name of dangerous commands in a shared</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#environment-For-instance-the-CONFIG-command-may-be-renamed-into-something"><span class="nav-number">89.</span> <span class="nav-text">environment. For instance the CONFIG command may be renamed into something</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-hard-to-guess-so-that-it-will-be-still-available-for-internal-use"><span class="nav-number">90.</span> <span class="nav-text">of hard to guess so that it will be still available for internal-use</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tools-but-not-available-for-general-clients"><span class="nav-number">91.</span> <span class="nav-text">tools but not available for general clients.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Example"><span class="nav-number">92.</span> <span class="nav-text">Example:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52"><span class="nav-number">93.</span> <span class="nav-text">rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-also-possilbe-to-completely-kill-a-command-renaming-it-into"><span class="nav-number">94.</span> <span class="nav-text">It is also possilbe to completely kill a command renaming it into</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#an-empty-string"><span class="nav-number">95.</span> <span class="nav-text">an empty string:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rename-command-CONFIG-“”"><span class="nav-number">96.</span> <span class="nav-text">rename-command CONFIG “”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，"><span class="nav-number">97.</span> <span class="nav-text">设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如果设置maxclients-0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max-Number-of-clients-reached错误信息"><span class="nav-number">98.</span> <span class="nav-text">如果设置maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max Number of clients reached错误信息</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxclients-128"><span class="nav-number">99.</span> <span class="nav-text">maxclients 128</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Don’t-use-more-memory-than-the-specified-amount-of-bytes"><span class="nav-number">100.</span> <span class="nav-text">Don’t use more memory than the specified amount of bytes.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys-with-an"><span class="nav-number">101.</span> <span class="nav-text">When the memory limit is reached Redis will try to remove keys with an</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#EXPIRE-set-It-will-try-to-start-freeing-keys-that-are-going-to-expire"><span class="nav-number">102.</span> <span class="nav-text">EXPIRE set. It will try to start freeing keys that are going to expire</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-little-time-and-preserve-keys-with-a-longer-time-to-live"><span class="nav-number">103.</span> <span class="nav-text">in little time and preserve keys with a longer time to live.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-will-also-try-to-remove-objects-from-free-lists-if-possible"><span class="nav-number">104.</span> <span class="nav-text">Redis will also try to remove objects from free lists if possible.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-all-this-fails-Redis-will-start-to-reply-with-errors-to-commands"><span class="nav-number">105.</span> <span class="nav-text">If all this fails, Redis will start to reply with errors to commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-will-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue"><span class="nav-number">106.</span> <span class="nav-text">that will use more memory, like SET, LPUSH, and so on, and will continue</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-reply-to-most-read-only-commands-like-GET"><span class="nav-number">107.</span> <span class="nav-text">to reply to most read-only commands like GET.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WARNING-maxmemory-can-be-a-good-idea-mainly-if-you-want-to-use-Redis-as-a"><span class="nav-number">108.</span> <span class="nav-text">WARNING: maxmemory can be a good idea mainly if you want to use Redis as a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#‘state’-server-or-cache-not-as-a-real-DB-When-Redis-is-used-as-a-real"><span class="nav-number">109.</span> <span class="nav-text">‘state’ server or cache, not as a real DB. When Redis is used as a real</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#database-the-memory-usage-will-grow-over-the-weeks-it-will-be-obvious-if"><span class="nav-number">110.</span> <span class="nav-text">database the memory usage will grow over the weeks, it will be obvious if</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#it-is-going-to-use-too-much-memory-in-the-long-run-and-you’ll-have-the-time"><span class="nav-number">111.</span> <span class="nav-text">it is going to use too much memory in the long run, and you’ll have the time</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-upgrade-With-maxmemory-after-the-limit-is-reached-you’ll-start-to-get"><span class="nav-number">112.</span> <span class="nav-text">to upgrade. With maxmemory after the limit is reached you’ll start to get</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#errors-for-write-operations-and-this-may-even-lead-to-DB-inconsistency"><span class="nav-number">113.</span> <span class="nav-text">errors for write operations, and this may even lead to DB inconsistency.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，"><span class="nav-number">114.</span> <span class="nav-text">指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。"><span class="nav-number">115.</span> <span class="nav-text">当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis新的vm机制，会把Key存放内存，Value会存放在swap区"><span class="nav-number">116.</span> <span class="nav-text">Redis新的vm机制，会把Key存放内存，Value会存放在swap区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxmemory"><span class="nav-number">117.</span> <span class="nav-text">maxmemory </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory"><span class="nav-number">118.</span> <span class="nav-text">MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-reached-You-can-select-among-five-behavior"><span class="nav-number">119.</span> <span class="nav-text">is reached? You can select among five behavior:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm"><span class="nav-number">120.</span> <span class="nav-text">volatile-lru -> remove the key with an expire set using an LRU algorithm</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#allkeys-lru-gt-remove-any-key-accordingly-to-the-LRU-algorithm"><span class="nav-number">121.</span> <span class="nav-text">allkeys-lru -> remove any key accordingly to the LRU algorithm</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#volatile-random-gt-remove-a-random-key-with-an-expire-set"><span class="nav-number">122.</span> <span class="nav-text">volatile-random -> remove a random key with an expire set</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#allkeys-gt-random-gt-remove-a-random-key-any-key"><span class="nav-number">123.</span> <span class="nav-text">allkeys->random -> remove a random key, any key</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL"><span class="nav-number">124.</span> <span class="nav-text">volatile-ttl -> remove the key with the nearest expire time (minor TTL)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations"><span class="nav-number">125.</span> <span class="nav-text">noeviction -> don’t expire at all, just return an error on write operations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-with-all-the-kind-of-policies-Redis-will-return-an-error-on-write"><span class="nav-number">126.</span> <span class="nav-text">Note: with all the kind of policies, Redis will return an error on write</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#operations-when-there-are-not-suitable-keys-for-eviction"><span class="nav-number">127.</span> <span class="nav-text">operations, when there are not suitable keys for eviction.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#At-the-date-of-writing-this-commands-are-set-setnx-setex-append"><span class="nav-number">128.</span> <span class="nav-text">At the date of writing this commands are: set setnx setex append</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd"><span class="nav-number">129.</span> <span class="nav-text">incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby"><span class="nav-number">130.</span> <span class="nav-text">sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby"><span class="nav-number">131.</span> <span class="nav-text">zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#getset-mset-msetnx-exec-sort"><span class="nav-number">132.</span> <span class="nav-text">getset mset msetnx exec sort</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-default-is"><span class="nav-number">133.</span> <span class="nav-text">The default is:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxmemory-policy-volatile-lru"><span class="nav-number">134.</span> <span class="nav-text">maxmemory-policy volatile-lru</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated"><span class="nav-number">135.</span> <span class="nav-text">LRU and minimal TTL algorithms are not precise algorithms but approximated</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#algorithms-in-order-to-save-memory-so-you-can-select-as-well-the-sample"><span class="nav-number">136.</span> <span class="nav-text">algorithms (in order to save memory), so you can select as well the sample</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#size-to-check-For-instance-for-default-Redis-will-check-three-keys-and"><span class="nav-number">137.</span> <span class="nav-text">size to check. For instance for default Redis will check three keys and</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pick-the-one-that-was-used-less-recently-you-can-change-the-sample-size"><span class="nav-number">138.</span> <span class="nav-text">pick the one that was used less recently, you can change the sample size</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#using-the-following-configuration-directive"><span class="nav-number">139.</span> <span class="nav-text">using the following configuration directive.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxmemory-samples-3"><span class="nav-number">140.</span> <span class="nav-text">maxmemory-samples 3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-that-you-can-have-both-the-async-dumps-and-the-append-only-file-if-you"><span class="nav-number">141.</span> <span class="nav-text">Note that you can have both the async dumps and the append only file if you</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#like-you-have-to-comment-the-“save”-statements-above-to-disable-the-dumps"><span class="nav-number">142.</span> <span class="nav-text">like (you have to comment the “save” statements above to disable the dumps).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Still-if-append-only-mode-is-enabled-Redis-will-load-the-data-from-the"><span class="nav-number">143.</span> <span class="nav-text">Still if append only mode is enabled Redis will load the data from the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#log-file-at-startup-ignoring-the-dump-rdb-file"><span class="nav-number">144.</span> <span class="nav-text">log file at startup ignoring the dump.rdb file.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。"><span class="nav-number">145.</span> <span class="nav-text">指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#因为redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no"><span class="nav-number">146.</span> <span class="nav-text">因为redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IMPORTANT-Check-the-BGREWRITEAOF-to-check-how-to-rewrite-the-append"><span class="nav-number">147.</span> <span class="nav-text">IMPORTANT: Check the BGREWRITEAOF to check how to rewrite the append</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#log-file-in-background-when-it-gets-too-big"><span class="nav-number">148.</span> <span class="nav-text">log file in background when it gets too big.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定更新日志文件名，默认为appendonly-aof"><span class="nav-number">149.</span> <span class="nav-text">指定更新日志文件名，默认为appendonly.aof</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#appendfilename-appendonly-aof"><span class="nav-number">150.</span> <span class="nav-text">appendfilename appendonly.aof</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk"><span class="nav-number">151.</span> <span class="nav-text">The fsync() call tells the Operating System to actually write data on disk</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#instead-to-wait-for-more-data-in-the-output-buffer-Some-OS-will-really-flush"><span class="nav-number">152.</span> <span class="nav-text">instead to wait for more data in the output buffer. Some OS will really flush</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP"><span class="nav-number">153.</span> <span class="nav-text">data on disk, some other OS will just try to do it ASAP.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定更新日志条件，共有3个可选值："><span class="nav-number">154.</span> <span class="nav-text">指定更新日志条件，共有3个可选值：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#no-表示等操作系统进行数据缓存同步到磁盘（快）"><span class="nav-number">155.</span> <span class="nav-text">no:表示等操作系统进行数据缓存同步到磁盘（快）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#always-表示每次更新操作后手动调用fsync-将数据写到磁盘（慢，安全）"><span class="nav-number">156.</span> <span class="nav-text">always:表示每次更新操作后手动调用fsync()将数据写到磁盘（慢，安全）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#everysec-表示每秒同步一次（折衷，默认值）"><span class="nav-number">157.</span> <span class="nav-text">everysec:表示每秒同步一次（折衷，默认值）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#appendfsync-no"><span class="nav-number">158.</span> <span class="nav-text">appendfsync no</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background"><span class="nav-number">159.</span> <span class="nav-text">When the AOF fsync policy is set to always or everysec, and a background</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#saving-process-a-background-save-or-AOF-log-background-rewriting-is"><span class="nav-number">160.</span> <span class="nav-text">saving process (a background save or AOF log background rewriting) is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations"><span class="nav-number">161.</span> <span class="nav-text">performing a lot of I/O against the disk, in some Linux configurations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for"><span class="nav-number">162.</span> <span class="nav-text">Redis may block too long on the fsync() call. Note that there is no fix for</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#this-currently-as-even-performing-fsync-in-a-different-thread-will-block"><span class="nav-number">163.</span> <span class="nav-text">this currently, as even performing fsync in a different thread will block</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#our-synchronous-write-2-call"><span class="nav-number">164.</span> <span class="nav-text">our synchronous write(2) call.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option"><span class="nav-number">165.</span> <span class="nav-text">In order to mitigate this problem it’s possible to use the following option</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-will-prevent-fsync-from-being-called-in-the-main-process-while-a"><span class="nav-number">166.</span> <span class="nav-text">that will prevent fsync() from being called in the main process while a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BGSAVE-or-BGREWRITEAOF-is-in-progress"><span class="nav-number">167.</span> <span class="nav-text">BGSAVE or BGREWRITEAOF is in progress.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-means-that-while-another-child-is-saving-the-durability-of-Redis-is"><span class="nav-number">168.</span> <span class="nav-text">This means that while another child is saving the durability of Redis is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-same-as-“appendfsync-none”-that-in-pratical-terms-means-that-it-is"><span class="nav-number">169.</span> <span class="nav-text">the same as “appendfsync none”, that in pratical terms means that it is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#possible-to-lost-up-to-30-seconds-of-log-in-the-worst-scenario-with-the"><span class="nav-number">170.</span> <span class="nav-text">possible to lost up to 30 seconds of log in the worst scenario (with the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#default-Linux-settings"><span class="nav-number">171.</span> <span class="nav-text">default Linux settings).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as"><span class="nav-number">172.</span> <span class="nav-text">If you have latency problems turn this to “yes”. Otherwise leave it as</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability"><span class="nav-number">173.</span> <span class="nav-text">“no” that is the safest pick from the point of view of durability.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Automatic-rewrite-of-the-append-only-file"><span class="nav-number">174.</span> <span class="nav-text">Automatic rewrite of the append only file.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling"><span class="nav-number">175.</span> <span class="nav-text">Redis is able to automatically rewrite the log file implicitly calling</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BGREWRITEAOF-when-the-AOF-log-size-will-growth-by-the-specified-percentage"><span class="nav-number">176.</span> <span class="nav-text">BGREWRITEAOF when the AOF log size will growth by the specified percentage.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the"><span class="nav-number">177.</span> <span class="nav-text">This is how it works: Redis remembers the size of the AOF file after the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#latest-rewrite-or-if-no-rewrite-happened-since-the-restart-the-size-of"><span class="nav-number">178.</span> <span class="nav-text">latest rewrite (or if no rewrite happened since the restart, the size of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-AOF-at-startup-is-used"><span class="nav-number">179.</span> <span class="nav-text">the AOF at startup is used).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-base-size-is-compared-to-the-current-size-If-the-current-size-is"><span class="nav-number">180.</span> <span class="nav-text">This base size is compared to the current size. If the current size is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also"><span class="nav-number">181.</span> <span class="nav-text">bigger than the specified percentage, the rewrite is triggered. Also</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this"><span class="nav-number">182.</span> <span class="nav-text">you need to specify a minimal size for the AOF file to be rewritten, this</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase"><span class="nav-number">183.</span> <span class="nav-text">is useful to avoid rewriting the AOF file even if the percentage increase</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-reached-but-it-is-still-pretty-small"><span class="nav-number">184.</span> <span class="nav-text">is reached but it is still pretty small.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-a-precentage-of-zero-in-order-to-disable-the-automatic-AOF"><span class="nav-number">185.</span> <span class="nav-text">Specify a precentage of zero in order to disable the automatic AOF</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rewrite-feature"><span class="nav-number">186.</span> <span class="nav-text">rewrite feature.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified"><span class="nav-number">187.</span> <span class="nav-text">The Redis Slow Log is a system to log queries that exceeded a specified</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#execution-time-The-execution-time-does-not-include-the-I-O-operations"><span class="nav-number">188.</span> <span class="nav-text">execution time. The execution time does not include the I/O operations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#like-talking-with-the-client-sending-the-reply-and-so-forth"><span class="nav-number">189.</span> <span class="nav-text">like talking with the client, sending the reply and so forth,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only"><span class="nav-number">190.</span> <span class="nav-text">but just the time needed to actually execute the command (this is the only</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve"><span class="nav-number">191.</span> <span class="nav-text">stage of command execution where the thread is blocked and can not serve</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#other-requests-in-the-meantime"><span class="nav-number">192.</span> <span class="nav-text">other requests in the meantime).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis"><span class="nav-number">193.</span> <span class="nav-text">You can configure the slow log with two parameters: one tells Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the"><span class="nav-number">194.</span> <span class="nav-text">what is the execution time, in microseconds, to exceed in order for the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#command-to-get-logged-and-the-other-parameter-is-the-length-of-the"><span class="nav-number">195.</span> <span class="nav-text">command to get logged, and the other parameter is the length of the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the"><span class="nav-number">196.</span> <span class="nav-text">slow log. When a new command is logged the oldest one is removed from the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#queue-of-logged-commands"><span class="nav-number">197.</span> <span class="nav-text">queue of logged commands.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent"><span class="nav-number">198.</span> <span class="nav-text">The following time is expressed in microseconds, so 1000000 is equivalent</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-one-second-Note-that-a-negative-number-disables-the-slow-log-while"><span class="nav-number">199.</span> <span class="nav-text">to one second. Note that a negative number disables the slow log, while</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-value-of-zero-forces-the-logging-of-every-command"><span class="nav-number">200.</span> <span class="nav-text">a value of zero forces the logging of every command.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory"><span class="nav-number">201.</span> <span class="nav-text">There is no limit to this length. Just be aware that it will consume memory.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET"><span class="nav-number">202.</span> <span class="nav-text">You can reclaim memory used by the slow log with SLOWLOG RESET.</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#WARNING-Virtual-Memory-is-deprecated-in-Redis-2-4"><span class="nav-number">202.0.1.</span> <span class="nav-text">WARNING! Virtual Memory is deprecated in Redis 2.4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-use-of-Virtual-Memory-is-strongly-discouraged"><span class="nav-number">202.0.2.</span> <span class="nav-text">The use of Virtual Memory is strongly discouraged.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WARNING-Virtual-Memory-is-deprecated-in-Redis-2-4-1"><span class="nav-number">202.0.3.</span> <span class="nav-text">WARNING! Virtual Memory is deprecated in Redis 2.4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-use-of-Virtual-Memory-is-strongly-discouraged-1"><span class="nav-number">202.0.4.</span> <span class="nav-text">The use of Virtual Memory is strongly discouraged.</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Virtual-Memory-allows-Redis-to-work-with-datasets-bigger-than-the-actual"><span class="nav-number">203.</span> <span class="nav-text">Virtual Memory allows Redis to work with datasets bigger than the actual</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#amount-of-RAM-needed-to-hold-the-whole-dataset-in-memory"><span class="nav-number">204.</span> <span class="nav-text">amount of RAM needed to hold the whole dataset in memory.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#In-order-to-do-so-very-used-keys-are-taken-in-memory-while-the-other-keys"><span class="nav-number">205.</span> <span class="nav-text">In order to do so very used keys are taken in memory while the other keys</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#are-swapped-into-a-swap-file-similarly-to-what-operating-systems-do"><span class="nav-number">206.</span> <span class="nav-text">are swapped into a swap file, similarly to what operating systems do</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#with-memory-pages"><span class="nav-number">207.</span> <span class="nav-text">with memory pages.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定是否启用虚拟内存机制，默认值为no，"><span class="nav-number">208.</span> <span class="nav-text">指定是否启用虚拟内存机制，默认值为no，</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中"><span class="nav-number">209.</span> <span class="nav-text">VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#把vm-enabled设置为yes，根据需要设置好接下来的三个VM参数，就可以启动VM了"><span class="nav-number">210.</span> <span class="nav-text">把vm-enabled设置为yes，根据需要设置好接下来的三个VM参数，就可以启动VM了</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vm-enabled-yes"><span class="nav-number">211.</span> <span class="nav-text">vm-enabled yes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-is-the-path-of-the-Redis-swap-file-As-you-can-guess-swap-files"><span class="nav-number">212.</span> <span class="nav-text">This is the path of the Redis swap file. As you can guess, swap files</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#can’t-be-shared-by-different-Redis-instances-so-make-sure-to-use-a-swap"><span class="nav-number">213.</span> <span class="nav-text">can’t be shared by different Redis instances, so make sure to use a swap</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#file-for-every-redis-process-you-are-running-Redis-will-complain-if-the"><span class="nav-number">214.</span> <span class="nav-text">file for every redis process you are running. Redis will complain if the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#swap-file-is-already-in-use"><span class="nav-number">215.</span> <span class="nav-text">swap file is already in use.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis交换文件最好的存储是SSD（固态硬盘）"><span class="nav-number">216.</span> <span class="nav-text">Redis交换文件最好的存储是SSD（固态硬盘）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#虚拟内存文件路径，默认值为-tmp-redis-swap，不可多个Redis实例共享"><span class="nav-number">217.</span> <span class="nav-text">虚拟内存文件路径，默认值为/tmp/redis.swap，不可多个Redis实例共享</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WARNING-if-you-are-using-a-shared-hosting-the-default-of-putting"><span class="nav-number">218.</span> <span class="nav-text"> WARNING  if you are using a shared hosting the default of putting</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-swap-file-under-tmp-is-not-secure-Create-a-dir-with-access-granted"><span class="nav-number">219.</span> <span class="nav-text">the swap file under /tmp is not secure. Create a dir with access granted</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#only-to-Redis-user-and-configure-Redis-to-create-the-swap-file-there"><span class="nav-number">220.</span> <span class="nav-text">only to Redis user and configure Redis to create the swap file there.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#With-vm-max-memory-0-the-system-will-swap-everything-it-can-Not-a-good"><span class="nav-number">221.</span> <span class="nav-text">With vm-max-memory 0 the system will swap everything it can. Not a good</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#default-just-specify-the-max-amount-of-RAM-you-can-in-bytes-but-it’s"><span class="nav-number">222.</span> <span class="nav-text">default, just specify the max amount of RAM you can in bytes, but it’s</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#better-to-leave-some-margin-For-instance-specify-an-amount-of-RAM"><span class="nav-number">223.</span> <span class="nav-text">better to leave some margin. For instance specify an amount of RAM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that’s-more-or-less-between-60-and-80-of-your-free-RAM"><span class="nav-number">224.</span> <span class="nav-text">that’s more or less between 60 and 80% of your free RAM.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多少，所有索引数据都是内存存储的（Redis的索引数据就是keys）"><span class="nav-number">225.</span> <span class="nav-text">将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多少，所有索引数据都是内存存储的（Redis的索引数据就是keys）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#也就是说当vm-max-memory设置为0的时候，其实是所有value都存在于磁盘。默认值为0"><span class="nav-number">226.</span> <span class="nav-text">也就是说当vm-max-memory设置为0的时候，其实是所有value都存在于磁盘。默认值为0</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的。"><span class="nav-number">227.</span> <span class="nav-text">Redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的。</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#建议如果存储很多小对象，page大小最后设置为32或64bytes；如果存储很大的对象，则可以使用更大的page，如果不确定，就使用默认值"><span class="nav-number">228.</span> <span class="nav-text">建议如果存储很多小对象，page大小最后设置为32或64bytes；如果存储很大的对象，则可以使用更大的page，如果不确定，就使用默认值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设置swap文件中的page数量由于页表（一种表示页面空闲或使用的bitmap）是存放在内存中的，在磁盘上每8个pages将消耗1byte的内存"><span class="nav-number">229.</span> <span class="nav-text">设置swap文件中的page数量由于页表（一种表示页面空闲或使用的bitmap）是存放在内存中的，在磁盘上每8个pages将消耗1byte的内存</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#swap空间总容量为-vm-page-size-vm-pages"><span class="nav-number">230.</span> <span class="nav-text">swap空间总容量为 vm-page-size * vm-pages</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#With-the-default-of-32-bytes-memory-pages-and-134217728-pages-Redis-will"><span class="nav-number">231.</span> <span class="nav-text">With the default of 32-bytes memory pages and 134217728 pages Redis will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#use-a-4-GB-swap-file-that-will-use-16-MB-of-RAM-for-the-page-table"><span class="nav-number">232.</span> <span class="nav-text">use a 4 GB swap file, that will use 16 MB of RAM for the page table.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It’s-better-to-use-the-smallest-acceptable-value-for-your-application"><span class="nav-number">233.</span> <span class="nav-text">It’s better to use the smallest acceptable value for your application,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-the-default-is-large-in-order-to-work-in-most-conditions"><span class="nav-number">234.</span> <span class="nav-text">but the default is large in order to work in most conditions.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Max-number-of-VM-I-O-threads-running-at-the-same-time"><span class="nav-number">235.</span> <span class="nav-text">Max number of VM I/O threads running at the same time.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-threads-are-used-to-read-write-data-from-to-swap-file-since-they"><span class="nav-number">236.</span> <span class="nav-text">This threads are used to read/write data from/to swap file, since they</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#also-encode-and-decode-objects-from-disk-to-memory-or-the-reverse-a-bigger"><span class="nav-number">237.</span> <span class="nav-text">also encode and decode objects from disk to memory or the reverse, a bigger</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#number-of-threads-can-help-with-big-objects-even-if-they-can’t-help-with"><span class="nav-number">238.</span> <span class="nav-text">number of threads can help with big objects even if they can’t help with</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#I-O-itself-as-the-physical-device-may-not-be-able-to-couple-with-many"><span class="nav-number">239.</span> <span class="nav-text">I/O itself as the physical device may not be able to couple with many</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#reads-writes-operations-at-the-same-time"><span class="nav-number">240.</span> <span class="nav-text">reads/writes operations at the same time.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设置访问swap文件的I-O线程数，最后不要超过机器的核数，如果设置为0，那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟，默认值为4"><span class="nav-number">241.</span> <span class="nav-text">设置访问swap文件的I/O线程数，最后不要超过机器的核数，如果设置为0，那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟，默认值为4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Hashes-are-encoded-in-a-special-way-much-more-memory-efficient-when-they"><span class="nav-number">242.</span> <span class="nav-text">Hashes are encoded in a special way (much more memory efficient) when they</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#have-at-max-a-given-numer-of-elements-and-the-biggest-element-does-not"><span class="nav-number">243.</span> <span class="nav-text">have at max a given numer of elements, and the biggest element does not</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#exceed-a-given-threshold-You-can-configure-this-limits-with-the-following"><span class="nav-number">244.</span> <span class="nav-text">exceed a given threshold. You can configure this limits with the following</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#configuration-directives"><span class="nav-number">245.</span> <span class="nav-text">configuration directives.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法"><span class="nav-number">246.</span> <span class="nav-text">指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Similarly-to-hashes-small-lists-are-also-encoded-in-a-special-way-in-order"><span class="nav-number">247.</span> <span class="nav-text">Similarly to hashes, small lists are also encoded in a special way in order</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-save-a-lot-of-space-The-special-representation-is-only-used-when"><span class="nav-number">248.</span> <span class="nav-text">to save a lot of space. The special representation is only used when</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#you-are-under-the-following-limits"><span class="nav-number">249.</span> <span class="nav-text">you are under the following limits:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed"><span class="nav-number">250.</span> <span class="nav-text">Sets have a special encoding in just one case: when a set is composed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-just-strings-that-happens-to-be-integers-in-radix-10-in-the-range"><span class="nav-number">251.</span> <span class="nav-text">of just strings that happens to be integers in radix 10 in the range</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-64-bit-signed-integers"><span class="nav-number">252.</span> <span class="nav-text">of 64 bit signed integers.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-following-configuration-setting-sets-the-limit-in-the-size-of-the"><span class="nav-number">253.</span> <span class="nav-text">The following configuration setting sets the limit in the size of the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#set-in-order-to-use-this-special-memory-saving-encoding"><span class="nav-number">254.</span> <span class="nav-text">set in order to use this special memory saving encoding.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in"><span class="nav-number">255.</span> <span class="nav-text">Similarly to hashes and lists, sorted sets are also specially encoded in</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and"><span class="nav-number">256.</span> <span class="nav-text">order to save a lot of space. This encoding is only used when the length and</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#elements-of-a-sorted-set-are-below-the-following-limits"><span class="nav-number">257.</span> <span class="nav-text">elements of a sorted set are below the following limits:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in"><span class="nav-number">258.</span> <span class="nav-text">Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level"><span class="nav-number">259.</span> <span class="nav-text">order to help rehashing the main Redis hash table (the one mapping top-level</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#keys-to-values-The-hash-table-implementation-redis-uses-see-dict-c"><span class="nav-number">260.</span> <span class="nav-text">keys to values). The hash table implementation redis uses (see dict.c)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#performs-a-lazy-rehashing-the-more-operation-you-run-into-an-hash-table"><span class="nav-number">261.</span> <span class="nav-text">performs a lazy rehashing: the more operation you run into an hash table</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-is-rhashing-the-more-rehashing-“steps”-are-performed-so-if-the"><span class="nav-number">262.</span> <span class="nav-text">that is rhashing, the more rehashing “steps” are performed, so if the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used"><span class="nav-number">263.</span> <span class="nav-text">server is idle the rehashing is never complete and some more memory is used</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#by-the-hash-table"><span class="nav-number">264.</span> <span class="nav-text">by the hash table.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to"><span class="nav-number">265.</span> <span class="nav-text">The default is to use this millisecond 10 times every second in order to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#active-rehashing-the-main-dictionaries-freeing-memory-when-possible"><span class="nav-number">266.</span> <span class="nav-text">active rehashing the main dictionaries, freeing memory when possible.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-unsure"><span class="nav-number">267.</span> <span class="nav-text">If unsure:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is"><span class="nav-number">268.</span> <span class="nav-text">use “activerehashing no” if you have hard latency requirements and it is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#not-a-good-thing-in-your-environment-that-Redis-can-reply-form-time-to-time"><span class="nav-number">269.</span> <span class="nav-text">not a good thing in your environment that Redis can reply form time to time</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-queries-with-2-milliseconds-delay"><span class="nav-number">270.</span> <span class="nav-text">to queries with 2 milliseconds delay.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定是否激活重置哈希，默认为开启"><span class="nav-number">271.</span> <span class="nav-text">指定是否激活重置哈希，默认为开启</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指定包含其他的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各实例又拥有自己的特定配置文件"><span class="nav-number">272.</span> <span class="nav-text">指定包含其他的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各实例又拥有自己的特定配置文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#include-path-to-local-conf"><span class="nav-number">273.</span> <span class="nav-text">include /path/to/local.conf</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#include-path-to-other-conf"><span class="nav-number">274.</span> <span class="nav-text">include /path/to/other.conf</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hellen</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
